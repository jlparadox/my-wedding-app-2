{"version":3,"sources":["null","ng://@ngx-gallery/core/models/index.ts","ng://@ngx-gallery/core/utils/gallery.default.ts","ng://@ngx-gallery/core/services/gallery-ref.ts","ng://@ngx-gallery/core/utils/gallery.token.ts","ng://@ngx-gallery/core/services/gallery.service.ts","ng://@ngx-gallery/core/templates/image-item.component.ts","ng://@ngx-gallery/core/templates/video-item.component.ts","ng://@ngx-gallery/core/templates/iframe-item.component.ts","ng://@ngx-gallery/core/templates/thumbnail-item.component.ts","ng://@ngx-gallery/core/templates/index.ts","ng://@ngx-gallery/core/components/gallery.component.ts","ng://@ngx-gallery/core/components/gallery-core.component.ts","ng://@ngx-gallery/core/components/gallery-nav.component.ts","ng://@ngx-gallery/core/components/gallery-thumb.component.ts","ng://@ngx-gallery/core/components/gallery-dots.component.ts","ng://@ngx-gallery/core/components/gallery-slider.component.ts","ng://@ngx-gallery/core/components/gallery-counter.component.ts","ng://@ngx-gallery/core/directives/lazy.directive.ts","ng://@ngx-gallery/core/directives/tap-click.directive.ts","ng://@ngx-gallery/core/directives/gallery-item.directive.ts","ng://@ngx-gallery/core/gallery.module.ts"],"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","__read","o","m","Symbol","iterator","r","e","ar","next","done","push","value","error","__spread","concat","defaultState","action","GalleryAction","INITIALIZED","currIndex","hasNext","hasPrev","items","defaultConfig","gestures","panSensitivity","counter","nav","dots","thumb","thumbWidth","thumbHeight","thumbPosition","disableThumb","slidingDirection","zoomOut","loadingIcon","GalleryRef","config","state","this","state$","BehaviorSubject","config$","setConfig","setState","add","item","active","ITEMS_CHANGED","remove","slice","load","set","INDEX_CHANGED","loop","prev","reset","destroy","complete","initialized","pipe","filter","itemsChanged","indexChanged","GALLERY_CONFIG","InjectionToken","Gallery","ref","id","_instances","destroyAll","_this","keys","map","key","destory","resetAll","gallery","Injectable","Inject","args","ImageItemComponent","sanitizer","Component","selector","changeDetection","ChangeDetectionStrategy","OnPush","preserveWhitespaces","template","styles","DomSanitizer","Input","VideoItemComponent","IframeItemComponent","ThumbnailItemComponent","ImageItem","src","data","VideoItem","poster","IframeItem","YoutubeItem","GalleryComponent","_gallery","EventEmitter","getConfig","onIndexChange","galleryRef","ngOnChanges","ngOnInit","indexChange","observers","_indexChange$","subscribe","itemsChange","_itemChange$","ngOnDestroy","unsubscribe","destroyRef","Output","GalleryCoreComponent","HostBinding","GalleryNavComponent","GalleryThumbComponent","_el","thumbState$","stateStream$","style","thumbsStyle","Hammer","mc","nativeElement","get","direction","DIRECTION_ALL","on","deltaY","isFinal","verticalPan","deltaX","horizontalPan","delta","height","transform","width","velocityY","emit","velocityX","ElementRef","GalleryDotsComponent","GallerySliderComponent","platform","sliderState$","sliderStyle","viewDepth","offsetWidth","offsetHeight","isPlatformBrowser","resizeSub$","fromEvent","window","debounceTime","tap","getValue","setTimeout","PLATFORM_ID","GalleryCounterComponent","LazyDirective","_renderer","Subject","img","Image","_worker$","switchMap","imageSrc","loading","loadSuccess","setStyle","loadError","zip","imagePath","loadImage","Directive","Renderer2","TapClickDirective","el","renderer","setTapEvent","tapClickDisabled","tapClick","clickListener","listen","stopPropagation","GalleryItemDirective","componentFactoryResolver","viewContainerRef","componentFactory","resolveComponentFactory","type","clear","createComponent","instance","ComponentFactoryResolver","ViewContainerRef","galleryFactory","galleryConfig","GalleryModule","forRoot","ngModule","providers","provide","useValue","useFactory","deps","NgModule","imports","CommonModule","declarations","exports","entryComponents"],"mappings":"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","sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = Object.setPrototypeOf ||\r\n    ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n    function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = Object.assign || function __assign(t) {\r\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n        s = arguments[i];\r\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n    }\r\n    return t;\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\r\n            t[p[i]] = s[p[i]];\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = y[op[0] & 2 ? \"return\" : op[0] ? \"throw\" : \"next\"]) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [0, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r);  }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { if (o[n]) i[n] = function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; }; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator];\r\n    return m ? m.call(o) : typeof __values === \"function\" ? __values(o) : o[Symbol.iterator]();\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n","import { Type } from '@angular/core';\r\n\r\nexport interface GalleryState {\r\n  action?: GalleryAction;\r\n  items?: GalleryItem[];\r\n  currIndex?: number;\r\n  hasNext?: boolean;\r\n  hasPrev?: boolean;\r\n}\r\n\r\nexport interface GalleryItem {\r\n  data?: any;\r\n  component?: Type<any>;\r\n  thumbComponent?: Type<any>;\r\n}\r\n\r\nexport enum GalleryAction {\r\n  INITIALIZED = 'initialized',\r\n  ITEMS_CHANGED = 'itemsChanged',\r\n  INDEX_CHANGED = 'indexChanged',\r\n  OPENED = 'opened',\r\n  CLOSED = 'closed'\r\n}\r\n\r\nexport interface GalleryConfig {\r\n  gestures?: boolean;\r\n  loop?: boolean;\r\n  panSensitivity?: number;\r\n  nav?: boolean;\r\n  dots?: boolean;\r\n  counter?: boolean;\r\n  thumb?: boolean;\r\n  thumbWidth?: number;\r\n  thumbHeight?: number;\r\n  thumbPosition?: 'top' | 'left' | 'right' | 'bottom';\r\n  disableThumb?: boolean;\r\n  zoomOut?: number;\r\n  slidingDirection?: 'horizontal' | 'vertical';\r\n  loadingIcon?: string;\r\n}\r\n\r\nexport interface GalleryItemComponent {\r\n  data: any;\r\n  index?: number;\r\n}\r\n","import { GalleryAction, GalleryConfig, GalleryState } from '../models';\r\n\r\n/** Initial state */\r\nexport const defaultState: GalleryState = {\r\n  action: GalleryAction.INITIALIZED,\r\n  currIndex: 0,\r\n  hasNext: false,\r\n  hasPrev: false,\r\n  items: []\r\n};\r\n\r\nexport const defaultConfig: GalleryConfig = {\r\n  gestures: true,\r\n  panSensitivity: 25,\r\n  counter: true,\r\n  nav: true,\r\n  dots: false,\r\n  thumb: true,\r\n  thumbWidth: 120,\r\n  thumbHeight: 90,\r\n  thumbPosition: 'bottom',\r\n  disableThumb: false,\r\n  slidingDirection: 'horizontal',\r\n  zoomOut: 0,\r\n  loadingIcon: `<?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<svg stroke=\"#fff\" viewBox=\"0 0 44 44\" xmlns=\"http://www.w3.org/2000/svg\">\r\n<g fill=\"none\" fill-rule=\"evenodd\" stroke-width=\"2\">\r\n<circle cx=\"22\" cy=\"22\" r=\"1\">\r\n<animate attributeName=\"r\" begin=\"0s\" calcMode=\"spline\" dur=\"1.8s\" keySplines=\"0.165, 0.84, 0.44, 1\" keyTimes=\"0; 1\" repeatCount=\"indefinite\" values=\"1; 20\"/>\r\n<animate attributeName=\"stroke-opacity\" begin=\"0s\" calcMode=\"spline\" dur=\"1.8s\" keySplines=\"0.3, 0.61, 0.355, 1\" keyTimes=\"0; 1\" repeatCount=\"indefinite\" values=\"1; 0\"/>\r\n</circle>\r\n<circle cx=\"22\" cy=\"22\" r=\"1\">\r\n<animate attributeName=\"r\" begin=\"-0.9s\" calcMode=\"spline\" dur=\"1.8s\" keySplines=\"0.165, 0.84, 0.44, 1\" keyTimes=\"0; 1\" repeatCount=\"indefinite\" values=\"1; 20\"/>\r\n<animate attributeName=\"stroke-opacity\" begin=\"-0.9s\" calcMode=\"spline\" dur=\"1.8s\" keySplines=\"0.3, 0.61, 0.355, 1\" keyTimes=\"0; 1\" repeatCount=\"indefinite\" values=\"1; 0\"/>\r\n</circle>\r\n</g>\r\n</svg>`\r\n};\r\n","import { BehaviorSubject } from 'rxjs/BehaviorSubject';\r\nimport { filter } from 'rxjs/operators/filter';\r\nimport { Observable } from 'rxjs/Observable';\r\nimport { defaultConfig, defaultState } from '../utils/gallery.default';\r\nimport {\r\n  GalleryState,\r\n  GalleryConfig,\r\n  GalleryAction,\r\n  GalleryItem\r\n} from '../models';\r\n\r\nexport class GalleryRef {\r\n  state$: BehaviorSubject<GalleryState>;\r\n  config$: BehaviorSubject<GalleryConfig>;\r\n\r\n  constructor(\r\n    public config: GalleryConfig = defaultConfig,\r\n    public state: GalleryState = defaultState\r\n  ) {\r\n    this.state$ = new BehaviorSubject<GalleryState>(state);\r\n    this.config$ = new BehaviorSubject<GalleryConfig>(defaultConfig);\r\n    this.setConfig(config);\r\n  }\r\n\r\n  /**\r\n   * Set gallery config\r\n   * @param config\r\n   */\r\n  setConfig(config: GalleryConfig) {\r\n    this.config = { ...defaultConfig, ...this.config, ...config };\r\n    this.config$.next(this.config);\r\n  }\r\n\r\n  /**\r\n   * Set gallery state\r\n   * @param state\r\n   */\r\n  setState(state: GalleryState) {\r\n    this.state = { ...this.state, ...state };\r\n    this.state$.next(this.state);\r\n  }\r\n\r\n  /** Add gallery item\r\n   * @param item - Gallery item object\r\n   * @param active - Set the new item as current slide\r\n   */\r\n  add(item: GalleryItem, active?: boolean) {\r\n    const items = [...this.state.items, item];\r\n    this.setState({\r\n      action: GalleryAction.ITEMS_CHANGED,\r\n      items: items,\r\n      hasNext: items.length > 1,\r\n      currIndex: active ? items.length - 1 : this.state.currIndex\r\n    });\r\n  }\r\n\r\n  /** Remove gallery item\r\n   * @param i - Item index\r\n   */\r\n  remove(i: number) {\r\n    const items = [\r\n      ...this.state.items.slice(0, i),\r\n      ...this.state.items.slice(i + 1, this.state.items.length)\r\n    ];\r\n    this.setState({\r\n      action: GalleryAction.ITEMS_CHANGED,\r\n      items: items,\r\n      hasNext: items.length > 1,\r\n      hasPrev: i > 0\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Load items and reset the state\r\n   * @param items - Gallery images data\r\n   */\r\n  load(items: GalleryItem[]) {\r\n    if (items) {\r\n      this.setState({\r\n        action: GalleryAction.ITEMS_CHANGED,\r\n        items: items,\r\n        hasNext: items.length > 1,\r\n        hasPrev: false\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Set active item\r\n   * @param i - Active Index\r\n   * @param action - Action type\r\n   */\r\n  set(i: number) {\r\n    if (i !== this.state.currIndex) {\r\n      this.setState({\r\n        action: GalleryAction.INDEX_CHANGED,\r\n        currIndex: i,\r\n        hasNext: i < this.state.items.length - 1,\r\n        hasPrev: i > 0\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Next item\r\n   */\r\n  next() {\r\n    if (this.state.hasNext) {\r\n      this.set(this.state.currIndex + 1);\r\n    } else if (this.config.loop) {\r\n      this.set(0);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Prev item\r\n   */\r\n  prev() {\r\n    if (this.state.hasPrev) {\r\n      this.set(this.state.currIndex - 1);\r\n    } else if (this.config.loop) {\r\n      this.set(this.state.items.length - 1);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Reset gallery to initial state\r\n   */\r\n  reset() {\r\n    this.setState(defaultState);\r\n  }\r\n\r\n  /**\r\n   * Destroy GalleryRef (for internal use only)\r\n   */\r\n  destroy() {\r\n    this.state$.complete();\r\n    this.config$.complete();\r\n  }\r\n\r\n  /** Gallery Events */\r\n\r\n  /**\r\n   * Stream that emits when gallery is initialized/reset\r\n   */\r\n  initialized(): Observable<GalleryState> {\r\n    return this.state$.pipe(\r\n      filter(\r\n        (state: GalleryState) => state.action === GalleryAction.INITIALIZED\r\n      )\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Stream that emits when items is changed (items loaded, item added, item removed)\r\n   */\r\n  itemsChanged(): Observable<GalleryState> {\r\n    return this.state$.pipe(\r\n      filter(\r\n        (state: GalleryState) => state.action === GalleryAction.ITEMS_CHANGED\r\n      )\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Stream that emits when current item is changed\r\n   */\r\n  indexChanged(): Observable<GalleryState> {\r\n    return this.state$.pipe(\r\n      filter(\r\n        (state: GalleryState) => state.action === GalleryAction.INDEX_CHANGED\r\n      )\r\n    );\r\n  }\r\n}\r\n","import { InjectionToken } from '@angular/core';\r\nimport { GalleryConfig } from '../models';\r\n\r\nexport const GALLERY_CONFIG = new InjectionToken<GalleryConfig>('galleryConfig');\r\n","import { Inject, Injectable } from '@angular/core';\r\n\r\nimport { GalleryRef } from './gallery-ref';\r\nimport { GALLERY_CONFIG } from '../utils/gallery.token';\r\nimport { defaultConfig } from '../utils/gallery.default';\r\nimport { GalleryConfig } from '../models';\r\n\r\n@Injectable()\r\nexport class Gallery {\r\n\r\n  /** Stores GalleryRef instances */\r\n  private readonly _instances = {};\r\n\r\n  /** Global config */\r\n  config: GalleryConfig;\r\n\r\n  constructor(@Inject(GALLERY_CONFIG) config: GalleryConfig) {\r\n    this.config = {...defaultConfig, ...config};\r\n  }\r\n\r\n  /**\r\n   * Returns Gallery by ID\r\n   */\r\n  ref(id = 'root', config?: GalleryConfig) {\r\n    if (this._instances[id] instanceof GalleryRef) {\r\n      return this._instances[id];\r\n    } else {\r\n      config = {...this.config, ...config};\r\n      return this._instances[id] = new GalleryRef(config);\r\n    }\r\n  }\r\n\r\n  destroy(id = 'root') {\r\n    if (this._instances[id] instanceof GalleryRef) {\r\n      this._instances[id].destroy();\r\n      this._instances[id] = null;\r\n    }\r\n  }\r\n\r\n  destroyAll() {\r\n    Object.keys(this._instances)\r\n      .map((key) => {\r\n        this._instances[key].destory();\r\n        this._instances[key] = null;\r\n      });\r\n  }\r\n\r\n  resetAll() {\r\n    Object.keys(this._instances)\r\n      .map((id = 'root') => this._instances[id].gallery)\r\n      .map((gallery: GalleryRef) => gallery.reset());\r\n  }\r\n\r\n}\r\n","import { ChangeDetectionStrategy, Component, Input } from '@angular/core';\r\nimport { DomSanitizer } from '@angular/platform-browser';\r\nimport { GalleryItemComponent } from '../models';\r\nimport { Gallery } from '../services/gallery.service';\r\n\r\n@Component({\r\n  selector: 'image-item',\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n  preserveWhitespaces: false,\r\n  template: `\r\n    <div [lazyImage]=\"data?.src\" (loading)=\"loading = $event\"></div>\r\n    <i class=\"g-loading\" *ngIf=\"loading\" [innerHTML]=\"sanitizer.bypassSecurityTrustHtml(gallery.config.loadingIcon)\"></i>\r\n  `,\r\n  styles: [`\r\n    :host {\r\n      position: relative;\r\n      display: block;\r\n      width: 100%;\r\n      height: 100%;\r\n    }\r\n    div {\r\n      background-position: center center;\r\n      background-size: cover;\r\n      width: 100%;\r\n      height: 100%;\r\n    }\r\n  `],\r\n})\r\nexport class ImageItemComponent implements GalleryItemComponent {\r\n\r\n  loading: boolean;\r\n  @Input() data: any;\r\n\r\n  constructor(public gallery: Gallery, public sanitizer: DomSanitizer) {\r\n  }\r\n}\r\n","import { ChangeDetectionStrategy, Component, Input } from '@angular/core';\r\nimport { DomSanitizer } from '@angular/platform-browser';\r\nimport { GalleryItemComponent } from '../models';\r\n\r\n@Component({\r\n  selector: 'video-item',\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n  preserveWhitespaces: false,\r\n  template: `\r\n    <video controls\r\n           [src]=\"sanitizer.bypassSecurityTrustResourceUrl(data?.src)\"\r\n           [poster]=\"sanitizer.bypassSecurityTrustResourceUrl(data?.poster)\"></video>\r\n  `,\r\n  styles: [`\r\n    video {\r\n      position: absolute;\r\n      width: 100%;\r\n      height: 100%;\r\n    }\r\n  `]\r\n})\r\nexport class VideoItemComponent implements GalleryItemComponent {\r\n\r\n  @Input() data: any;\r\n\r\n  constructor(public sanitizer: DomSanitizer) {\r\n  }\r\n}\r\n","import { ChangeDetectionStrategy, Component, Input } from '@angular/core';\r\nimport { DomSanitizer } from '@angular/platform-browser';\r\nimport { GalleryItemComponent } from '../models';\r\n\r\n@Component({\r\n  selector: 'iframe-item',\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n  preserveWhitespaces: false,\r\n  template: `\r\n    <iframe frameborder=\"0\"\r\n            allowfullscreen\r\n            [src]=\"sanitizer.bypassSecurityTrustResourceUrl(data?.src)\"></iframe>\r\n  `,\r\n  styles: [`\r\n    iframe {\r\n      position: absolute;\r\n      width: 100%;\r\n      height: 100%;\r\n    }\r\n  `]\r\n})\r\nexport class IframeItemComponent implements GalleryItemComponent {\r\n\r\n  @Input() data;\r\n\r\n  constructor(public sanitizer: DomSanitizer) {\r\n  }\r\n}\r\n","import { ChangeDetectionStrategy, Component, Input } from '@angular/core';\r\nimport { GalleryItemComponent } from '../models';\r\n\r\n@Component({\r\n  selector: 'thumbnail-item',\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n  preserveWhitespaces: false,\r\n  template: `\r\n    <div [lazyImage]=\"data.thumb\"></div>\r\n  `,\r\n  styles: [`\r\n    :host {\r\n      width: 100%;\r\n      height: 100%;\r\n    }\r\n    div {\r\n      width: 100%;\r\n      height: 100%;\r\n      background-size: cover;\r\n      background-position: center center;\r\n    }\r\n  `]\r\n})\r\nexport class ThumbnailItemComponent implements GalleryItemComponent {\r\n  @Input() data: any;\r\n}\r\n","import { ImageItemComponent } from './image-item.component';\r\nimport { VideoItemComponent } from './video-item.component';\r\nimport { IframeItemComponent } from './iframe-item.component';\r\nimport { ThumbnailItemComponent } from './thumbnail-item.component';\r\nimport { GalleryItem } from '../models';\r\n\r\nexport class ImageItem implements GalleryItem {\r\n  public component = ImageItemComponent;\r\n  public thumbComponent = ThumbnailItemComponent;\r\n  public data: any;\r\n\r\n  constructor(src: string, thumb?: string) {\r\n    this.data = {src, thumb};\r\n  }\r\n}\r\n\r\nexport class VideoItem implements GalleryItem {\r\n  public component = VideoItemComponent;\r\n  public thumbComponent = ThumbnailItemComponent;\r\n  public data: any;\r\n\r\n  constructor(src: string, thumb?: string, poster?: string) {\r\n    this.data = {src, thumb, poster};\r\n  }\r\n}\r\n\r\nexport class IframeItem implements GalleryItem {\r\n  public component = IframeItemComponent;\r\n  public thumbComponent = ThumbnailItemComponent;\r\n  public data: any;\r\n\r\n  constructor(src: string, thumb?: string) {\r\n    this.data = {src, thumb};\r\n  }\r\n}\r\n\r\nexport class YoutubeItem implements GalleryItem {\r\n  public component = IframeItemComponent;\r\n  public thumbComponent = ThumbnailItemComponent;\r\n  public data: any;\r\n\r\n  constructor(src: string, thumb?: string) {\r\n    this.data = {\r\n      src: `//youtube.com/embed/${src}?wmode=transparent`,\r\n      thumb: thumb ? thumb : `//img.youtube.com/vi/${src}/default.jpg`\r\n    };\r\n  }\r\n}\r\n\r\nexport {\r\n  ImageItemComponent,\r\n  VideoItemComponent,\r\n  IframeItemComponent,\r\n  ThumbnailItemComponent\r\n};\r\n","import {\r\n  Component,\r\n  Input,\r\n  OnDestroy,\r\n  OnInit,\r\n  OnChanges,\r\n  Output,\r\n  ChangeDetectionStrategy,\r\n  EventEmitter\r\n} from '@angular/core';\r\nimport { Gallery } from '../services/gallery.service';\r\nimport { GalleryRef } from '../services/gallery-ref';\r\nimport { GalleryItem, GalleryState } from '../models';\r\nimport { Subscription } from 'rxjs/Subscription';\r\n\r\n@Component({\r\n  selector: 'gallery',\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n  preserveWhitespaces: false,\r\n  template: `\r\n    <gallery-core [state]=\"galleryRef.state$ | async\"\r\n                  [config]=\"galleryRef.config$ | async\"\r\n                  (indexChange)=\"onIndexChange($event)\"></gallery-core>\r\n    <ng-content></ng-content>\r\n  `\r\n})\r\nexport class GalleryComponent implements OnInit, OnChanges, OnDestroy {\r\n\r\n  galleryRef: GalleryRef;\r\n  @Input() id: string;\r\n  @Input() items: GalleryItem [];\r\n  @Input() gestures: boolean = this._gallery.config.gestures;\r\n  @Input() panSensitivity: number = this._gallery.config.panSensitivity;\r\n  @Input() zoomOut: number = this._gallery.config.zoomOut;\r\n  @Input() dots: boolean = this._gallery.config.dots;\r\n  @Input() thumb: boolean = this._gallery.config.thumb;\r\n  @Input() nav: boolean = this._gallery.config.nav;\r\n  @Input() counter: boolean = this._gallery.config.counter;\r\n  @Input() thumbWidth: number = this._gallery.config.thumbWidth;\r\n  @Input() thumbHeight: number = this._gallery.config.thumbHeight;\r\n  @Input() disableThumb: boolean = this._gallery.config.disableThumb;\r\n  @Input() thumbPosition: 'top' | 'left' | 'right' | 'bottom' = this._gallery.config.thumbPosition;\r\n  @Input() slidingDirection: 'horizontal' | 'vertical' = this._gallery.config.slidingDirection;\r\n  @Input() destroyRef = true;\r\n\r\n  @Output() indexChange = new EventEmitter<GalleryState>();\r\n  @Output() itemsChange = new EventEmitter<GalleryState>();\r\n\r\n  private _itemChange$: Subscription;\r\n  private _indexChange$: Subscription;\r\n\r\n  constructor(private _gallery: Gallery) {\r\n  }\r\n\r\n  private getConfig() {\r\n    return {\r\n      gestures: this.gestures,\r\n      panSensitivity: this.panSensitivity,\r\n      zoomOut: this.zoomOut,\r\n      counter: this.counter,\r\n      nav: this.nav,\r\n      dots: this.dots,\r\n      thumb: this.thumb,\r\n      thumbWidth: this.thumbWidth,\r\n      thumbHeight: this.thumbHeight,\r\n      thumbPosition: this.thumbPosition,\r\n      disableThumb: this.disableThumb,\r\n      slidingDirection: this.slidingDirection\r\n    };\r\n  }\r\n\r\n  onIndexChange(i) {\r\n    switch (i) {\r\n      case 'next':\r\n        this.galleryRef.next();\r\n        break;\r\n      case 'prev':\r\n        this.galleryRef.prev();\r\n        break;\r\n      default:\r\n        this.galleryRef.set(i);\r\n    }\r\n  }\r\n\r\n  ngOnChanges() {\r\n    if (this.galleryRef instanceof GalleryRef) {\r\n      this.galleryRef.setConfig(this.getConfig());\r\n\r\n      if (this.items !== this.galleryRef.state.items) {\r\n        this.load(this.items);\r\n      }\r\n    }\r\n  }\r\n\r\n  ngOnInit() {\r\n    // Get gallery instance by id\r\n    this.galleryRef = this._gallery.ref(this.id);\r\n    this.galleryRef.setConfig(this.getConfig());\r\n    this.load(this.items);\r\n\r\n    /** Subscribes to indexChange and itemsChange events when user bind them */\r\n    if (this.indexChange.observers.length) {\r\n      this._indexChange$ = this.galleryRef.indexChanged().subscribe((e: GalleryState) => this.indexChange.next(e));\r\n    }\r\n    if (this.itemsChange.observers.length) {\r\n      this._itemChange$ = this.galleryRef.itemsChanged().subscribe((e: GalleryState) => this.itemsChange.next(e));\r\n    }\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    if (this._indexChange$) {\r\n      this._indexChange$.unsubscribe();\r\n    }\r\n    if (this._itemChange$) {\r\n      this._itemChange$.unsubscribe();\r\n    }\r\n    if (this.destroyRef) {\r\n      this.galleryRef.reset();\r\n    }\r\n  }\r\n\r\n  load(items: GalleryItem[]) {\r\n    this.galleryRef.load(items);\r\n  }\r\n\r\n  add(item: GalleryItem, active?: boolean) {\r\n    this.galleryRef.add(item, active);\r\n  }\r\n\r\n  remove(i: number) {\r\n    this.galleryRef.remove(i);\r\n  }\r\n\r\n  next() {\r\n    this.galleryRef.next();\r\n  }\r\n\r\n  prev() {\r\n    this.galleryRef.prev();\r\n  }\r\n\r\n  set(i: number) {\r\n    this.galleryRef.set(i);\r\n  }\r\n\r\n  reset() {\r\n    this.galleryRef.reset();\r\n  }\r\n}\r\n","import { Component, Input, HostBinding, ChangeDetectionStrategy, EventEmitter, Output } from '@angular/core';\r\nimport { GalleryConfig, GalleryState } from '../models';\r\n\r\n@Component({\r\n  selector: 'gallery-core',\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n  preserveWhitespaces: false,\r\n  template: `\r\n    <gallery-thumb *ngIf=\"config.thumb\"\r\n                  [state]=\"state\"\r\n                  [config]=\"config\"\r\n                  (indexChange)=\"indexChange.emit($event)\">\r\n    </gallery-thumb>\r\n    <div class=\"g-box\">\r\n      <gallery-slider [state]=\"state\"\r\n                      [config]=\"config\"\r\n                      (indexChange)=\"indexChange.emit($event)\">\r\n        <gallery-nav *ngIf=\"config.nav && state.items.length > 1\"\r\n                    [state]=\"state\"\r\n                    [config]=\"config\"\r\n                    (indexChange)=\"indexChange.emit($event)\">\r\n        </gallery-nav>\r\n      </gallery-slider>\r\n      <gallery-dots *ngIf=\"config.dots\"\r\n                    [state]=\"state\"\r\n                    (indexChange)=\"indexChange.emit($event)\">\r\n      </gallery-dots>\r\n      <gallery-counter *ngIf=\"config.counter\"\r\n                      [state]=\"state\">\r\n      </gallery-counter>\r\n    </div>\r\n  `\r\n})\r\nexport class GalleryCoreComponent {\r\n\r\n  @Input() state: GalleryState;\r\n  @Input() config: GalleryConfig;\r\n  @Output() indexChange = new EventEmitter<string | number>();\r\n\r\n  /** Set thumbnails position ('top' | 'left' | 'right' | 'bottom') */\r\n  @HostBinding('attr.thumbPosition') get thumbPosition() {\r\n    return this.config.thumbPosition;\r\n  }\r\n\r\n  /** Set thumbnails position ('horizontal' | 'vertical') */\r\n  @HostBinding('attr.slidingDirection') get slidingDirection() {\r\n    return this.config.slidingDirection;\r\n  }\r\n\r\n}\r\n","import { Component, Input, Output, EventEmitter, ChangeDetectionStrategy } from '@angular/core';\r\nimport { GalleryState, GalleryConfig } from '../models';\r\n\r\n@Component({\r\n  selector: 'gallery-nav',\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n  preserveWhitespaces: false,\r\n  template: `\r\n    <i *ngIf=\"config.loop || state.hasPrev\" class=\"g-nav-prev\" (tapClick)=\"indexChange.emit('prev')\"></i>\r\n    <i *ngIf=\"config.loop || state.hasNext\" class=\"g-nav-next\" (tapClick)=\"indexChange.emit('next')\"></i>\r\n  `\r\n})\r\nexport class GalleryNavComponent {\r\n  @Input() state: GalleryState;\r\n  @Input() config: GalleryConfig;\r\n  @Output() indexChange = new EventEmitter<string>();\r\n}\r\n","import {\r\n  Component,\r\n  Input,\r\n  Output,\r\n  OnDestroy,\r\n  OnInit,\r\n  OnChanges,\r\n  ChangeDetectionStrategy,\r\n  ElementRef,\r\n  EventEmitter,\r\n  HostBinding\r\n} from '@angular/core';\r\nimport { GalleryConfig, GalleryState } from '../models';\r\n\r\nimport { BehaviorSubject } from 'rxjs/BehaviorSubject';\r\nimport { Observable } from 'rxjs/Observable';\r\nimport { map } from 'rxjs/operators/map';\r\n\r\ndeclare const Hammer: any;\r\n\r\n@Component({\r\n  selector: 'gallery-thumb',\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n  preserveWhitespaces: false,\r\n  template: `\r\n    <div *ngIf=\"thumbState$ | async; let thumbState\"\r\n         class=\"g-thumb-container\">\r\n      <div class=\"g-thumbs\"\r\n           [class.-no-transition]=\"thumbState.active\"\r\n           [ngStyle]=\"thumbState.style\">\r\n        <div *ngFor=\"let item of state.items;let i = index\"\r\n             class=\"g-thumb\"\r\n             [class.-current]=\"i === state.currIndex\"\r\n             (tapClick)=\"indexChange.emit(i)\"\r\n             [tapClickDisabled]=\"config.disableThumb\">\r\n          <ng-container [item]=\"item\" type=\"thumb\"></ng-container>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  `\r\n})\r\nexport class GalleryThumbComponent implements OnInit, OnChanges, OnDestroy {\r\n\r\n  mc: any;\r\n  thumbState$: Observable<any>;\r\n  stateStream$ = new BehaviorSubject({value: 0, active: false});\r\n  @Input() state: GalleryState;\r\n  @Input() config: GalleryConfig;\r\n  @Output() indexChange = new EventEmitter<string | number>();\r\n  @HostBinding('style.height') height;\r\n  @HostBinding('style.width') width;\r\n\r\n  constructor(private _el: ElementRef) {\r\n    this.thumbState$ = this.stateStream$.pipe(\r\n      map((state: any) => ({\r\n        style: this.thumbsStyle(state.value),\r\n        active: state.active\r\n      })));\r\n  }\r\n\r\n  ngOnChanges() {\r\n    this.stateStream$.next({value: 0, active: false});\r\n  }\r\n\r\n  ngOnInit() {\r\n    if (this.config.gestures && !this.config.disableThumb && typeof Hammer !== 'undefined') {\r\n\r\n      this.mc = new Hammer(this._el.nativeElement);\r\n      this.mc.get('pan').set({direction: Hammer.DIRECTION_ALL});\r\n\r\n      // Slides thumbnails\r\n      this.mc.on('pan', (e) => {\r\n        switch (this.config.thumbPosition) {\r\n          case 'right':\r\n          case 'left':\r\n            this.stateStream$.next({value: e.deltaY, active: true});\r\n            if (e.isFinal) {\r\n              this.stateStream$.next({value: 0, active: false});\r\n              this.verticalPan(e);\r\n            }\r\n            break;\r\n          case 'top':\r\n          case 'bottom':\r\n            this.stateStream$.next({value: e.deltaX, active: true});\r\n            if (e.isFinal) {\r\n              this.stateStream$.next({value: 0, active: false});\r\n              this.horizontalPan(e);\r\n            }\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    if (this.mc) {\r\n      this.mc.destroy();\r\n    }\r\n  }\r\n\r\n  thumbsStyle(delta: number) {\r\n    let value: number;\r\n    switch (this.config.thumbPosition) {\r\n      case 'top':\r\n      case 'bottom':\r\n        this.height = this.config.thumbHeight + 'px';\r\n        value = -(this.state.currIndex * this.config.thumbWidth) - (this.config.thumbWidth / 2 - delta);\r\n        return {\r\n          transform: `translate3d(${value}px, 0, 0)`,\r\n          width: this.state.items.length * this.config.thumbWidth + 'px',\r\n          height: '100%'\r\n        };\r\n      case 'left':\r\n      case 'right':\r\n        this.width = this.config.thumbWidth + 'px';\r\n        value = -(this.state.currIndex * this.config.thumbHeight) - (this.config.thumbHeight / 2 - delta);\r\n        return {\r\n          transform: `translate3d(0, ${value}px, 0)`,\r\n          width: '100%',\r\n          height: this.state.items.length * this.config.thumbHeight + 'px',\r\n        };\r\n    }\r\n  }\r\n\r\n  verticalPan(e) {\r\n    if (e.velocityY > 0.3) {\r\n      this.indexChange.emit('prev');\r\n    } else if (e.velocityY < -0.3) {\r\n      this.indexChange.emit('next');\r\n    } else {\r\n      if (e.deltaY / 2 <= -this.config.thumbHeight * this.state.items.length / this.config.panSensitivity) {\r\n        this.indexChange.emit('next');\r\n      } else if (e.deltaY / 2 >= this.config.thumbHeight * this.state.items.length / this.config.panSensitivity) {\r\n        this.indexChange.emit('prev');\r\n      } else {\r\n        this.indexChange.emit(this.state.currIndex);\r\n      }\r\n    }\r\n  }\r\n\r\n  horizontalPan(e) {\r\n    if (e.velocityX > 0.3) {\r\n      this.indexChange.emit('prev');\r\n    } else if (e.velocityX < -0.3) {\r\n      this.indexChange.emit('next');\r\n    } else {\r\n      if (e.deltaX / 2 <= -this.config.thumbWidth * this.state.items.length / this.config.panSensitivity) {\r\n        this.indexChange.emit('next');\r\n      } else if (e.deltaX / 2 >= this.config.thumbWidth * this.state.items.length / this.config.panSensitivity) {\r\n        this.indexChange.emit('prev');\r\n      } else {\r\n        this.indexChange.emit(this.state.currIndex);\r\n      }\r\n    }\r\n  }\r\n\r\n}\r\n","import { Component, Input, Output, ChangeDetectionStrategy, EventEmitter } from '@angular/core';\r\nimport { GalleryState } from '../models';\r\n\r\n@Component({\r\n  selector: 'gallery-dots',\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n  preserveWhitespaces: false,\r\n  template: `\r\n    <div class=\"g-dot\"\r\n         *ngFor=\"let item of state.items; let i = index\"\r\n         (tapClick)=\"indexChange.emit(i)\">\r\n      <div class=\"g-dot-inner\"\r\n           [class.-current]=\"i === state.currIndex\"></div>\r\n    </div>\r\n  `\r\n})\r\nexport class GalleryDotsComponent {\r\n  @Input() state: GalleryState;\r\n  @Output() indexChange = new EventEmitter<number>();\r\n}\r\n","import {\r\n  Component,\r\n  Input,\r\n  Output,\r\n  OnDestroy,\r\n  OnInit,\r\n  OnChanges,\r\n  ChangeDetectionStrategy,\r\n  ElementRef,\r\n  EventEmitter,\r\n  Inject,\r\n  PLATFORM_ID\r\n} from '@angular/core';\r\nimport { isPlatformBrowser } from '@angular/common';\r\nimport { GalleryState, GalleryConfig } from '../models';\r\n\r\nimport { BehaviorSubject } from 'rxjs/BehaviorSubject';\r\nimport { Observable } from 'rxjs/Observable';\r\nimport { Subscription } from 'rxjs/Subscription';\r\nimport { map } from 'rxjs/operators/map';\r\nimport { tap } from 'rxjs/operators/tap';\r\nimport { fromEvent } from 'rxjs/observable/fromEvent';\r\nimport { debounceTime } from 'rxjs/operators/debounceTime';\r\n\r\ndeclare const Hammer: any;\r\n\r\n@Component({\r\n  selector: 'gallery-slider',\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n  preserveWhitespaces: false,\r\n  template: `\r\n    <div *ngIf=\"sliderState$ | async; let sliderState\"\r\n         class=\"slides-container\"\r\n         [ngStyle]=\"viewDepth()\">\r\n      <div class=\"slides\"\r\n           [class.-no-transition]=\"sliderState.active\"\r\n           [ngStyle]=\"sliderState.style\">\r\n        <div *ngFor=\"let item of state.items\" class=\"slide\">\r\n          <ng-container [item]=\"item\"></ng-container>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <ng-content></ng-content>\r\n  `\r\n})\r\nexport class GallerySliderComponent implements OnInit, OnChanges, OnDestroy {\r\n\r\n  mc: any;\r\n  resizeSub$: Subscription;\r\n  sliderState$: Observable<any>;\r\n  stateStream$ = new BehaviorSubject({value: 0, active: false});\r\n  @Input() state: GalleryState;\r\n  @Input() config: GalleryConfig;\r\n  @Input() width: number;\r\n  @Input() height: number;\r\n  @Output() indexChange = new EventEmitter<string | number>();\r\n\r\n  constructor(private _el: ElementRef, @Inject(PLATFORM_ID) private platform: Object) {\r\n    this.sliderState$ = this.stateStream$.pipe(map(\r\n      (state: any) => ({\r\n        style: this.sliderStyle(state.value),\r\n        active: state.active\r\n      })));\r\n  }\r\n\r\n  viewDepth() {\r\n    return {transform: `perspective(50px) translate3d(0, 0, ${-this.config.zoomOut}px)`};\r\n  }\r\n\r\n  sliderStyle(delta: number) {\r\n    switch (this.config.slidingDirection) {\r\n      case 'horizontal':\r\n        return {\r\n          transform: `translate3d(${-(this.state.currIndex * this._el.nativeElement.offsetWidth) + delta}px, 0, 0)`,\r\n          width: this._el.nativeElement.offsetWidth * this.state.items.length + 'px',\r\n          height: '100%'\r\n        };\r\n      case 'vertical':\r\n        return {\r\n          transform: `translate3d(0, ${-(this.state.currIndex * this._el.nativeElement.offsetHeight) + delta}px, 0)`,\r\n          width: '100%',\r\n          height: this._el.nativeElement.offsetHeight * this.state.items.length + 'px',\r\n        };\r\n    }\r\n  }\r\n\r\n  ngOnChanges() {\r\n    this.stateStream$.next({value: 0, active: false});\r\n  }\r\n\r\n  ngOnInit() {\r\n    if (this.config.gestures && typeof Hammer !== 'undefined') {\r\n\r\n      this.mc = new Hammer(this._el.nativeElement);\r\n      this.mc.get('pan').set({direction: Hammer.DIRECTION_ALL});\r\n\r\n      // Slides thumbnails\r\n      this.mc.on('pan', (e) => {\r\n\r\n        switch (this.config.slidingDirection) {\r\n          case 'horizontal':\r\n            this.stateStream$.next({value: e.deltaX, active: true});\r\n            if (e.isFinal) {\r\n              this.stateStream$.next({value: 0, active: false});\r\n              this.horizontalPan(e);\r\n            }\r\n            break;\r\n          case 'vertical':\r\n            this.stateStream$.next({value: e.deltaY, active: true});\r\n            if (e.isFinal) {\r\n              this.stateStream$.next({value: 0, active: false});\r\n              this.verticalPan(e);\r\n            }\r\n        }\r\n      });\r\n    }\r\n\r\n    // Rearrange slider on window resize\r\n    if (isPlatformBrowser(this.platform)) {\r\n      this.resizeSub$ = fromEvent(window, 'resize').pipe(\r\n        debounceTime(200),\r\n        tap(() => this.stateStream$.next(this.stateStream$.getValue()))\r\n      ).subscribe();\r\n    }\r\n\r\n    // Fix wrong slider width on init\r\n    setTimeout(() => {\r\n      this.stateStream$.next({value: 0, active: false});\r\n    }, 300);\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    if (this.mc) {\r\n      this.mc.destroy();\r\n    }\r\n    if (this.resizeSub$) {\r\n      this.resizeSub$.unsubscribe();\r\n    }\r\n  }\r\n\r\n  verticalPan(e) {\r\n    if (e.velocityY > 0.3) {\r\n      this.indexChange.emit('prev');\r\n    } else if (e.velocityY < -0.3) {\r\n      this.indexChange.emit('next');\r\n    } else {\r\n      if (e.deltaY / 2 <= -this._el.nativeElement.offsetHeight * this.state.items.length / this.config.panSensitivity) {\r\n        this.indexChange.emit('next');\r\n      } else if (e.deltaY / 2 >= this._el.nativeElement.offsetHeight * this.state.items.length / this.config.panSensitivity) {\r\n        this.indexChange.emit('prev');\r\n      } else {\r\n        this.indexChange.emit(this.state.currIndex);\r\n      }\r\n    }\r\n  }\r\n\r\n  horizontalPan(e) {\r\n    if (e.velocityX > 0.3) {\r\n      this.indexChange.emit('prev');\r\n    } else if (e.velocityX < -0.3) {\r\n      this.indexChange.emit('next');\r\n    } else {\r\n      if (e.deltaX / 2 <= -this._el.nativeElement.offsetWidth * this.state.items.length / this.config.panSensitivity) {\r\n        this.indexChange.emit('next');\r\n      } else if (e.deltaX / 2 >= this._el.nativeElement.offsetWidth * this.state.items.length / this.config.panSensitivity) {\r\n        this.indexChange.emit('prev');\r\n      } else {\r\n        this.indexChange.emit(this.state.currIndex);\r\n      }\r\n    }\r\n  }\r\n}\r\n","import { Component, Input, ChangeDetectionStrategy } from '@angular/core';\r\nimport { GalleryState } from '../models';\r\n\r\n@Component({\r\n  selector: 'gallery-counter',\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n  preserveWhitespaces: false,\r\n  template: `<div class=\"g-counter\">{{(state.currIndex + 1) + '/' + state.items.length}}</div>`\r\n})\r\nexport class GalleryCounterComponent {\r\n  @Input() state: GalleryState;\r\n}\r\n","import {\r\n  Directive,\r\n  ElementRef,\r\n  Input,\r\n  Output,\r\n  EventEmitter,\r\n  Renderer2,\r\n  OnDestroy\r\n} from '@angular/core';\r\n\r\nimport { Subject } from 'rxjs/Subject';\r\n\r\nimport { switchMap } from 'rxjs/operators/switchMap';\r\nimport { tap } from 'rxjs/operators/tap';\r\nimport { zip } from 'rxjs/observable/zip';\r\nimport { fromEvent } from 'rxjs/observable/fromEvent';\r\n\r\n@Directive({\r\n  selector: '[lazyImage]'\r\n})\r\nexport class LazyDirective implements OnDestroy {\r\n\r\n  // Lazy load worker\r\n  private _worker$ = new Subject();\r\n\r\n  @Input('lazyImage')\r\n  set lazyImage(imagePath) {\r\n    this.loadImage(imagePath);\r\n  }\r\n\r\n  @Output() loading = new EventEmitter<boolean>();\r\n\r\n  constructor(private _el: ElementRef, private _renderer: Renderer2) {\r\n    const img = new Image();\r\n\r\n    this._worker$.pipe(\r\n      switchMap((imageSrc: string) => {\r\n\r\n        // Image is loading\r\n        this.loading.emit(true);\r\n\r\n        // Stop previously loading\r\n        img.src = imageSrc;\r\n\r\n        // Image load success\r\n        const loadSuccess = fromEvent(img, 'load').pipe(\r\n          tap(() => {\r\n            this._renderer.setStyle(this._el.nativeElement, 'backgroundImage', `url(${imageSrc})`);\r\n            this.loading.emit(false);\r\n          })\r\n        );\r\n\r\n        // Image load error\r\n        const loadError = fromEvent(img, 'error').pipe(tap(() => this.loading.emit(false)));\r\n\r\n        return zip(loadSuccess, loadError);\r\n      })\r\n    ).subscribe();\r\n  }\r\n\r\n  loadImage(imagePath) {\r\n    this._worker$.next(imagePath);\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this._worker$.complete();\r\n  }\r\n\r\n}\r\n","/**\r\n * This directive enable tap if HammerJS is loaded, otherwise it falls back to normal click event \r\n */\r\nimport { Directive, ElementRef, EventEmitter, Input, OnDestroy, OnInit, Output, Renderer2 } from '@angular/core';\r\n\r\ndeclare const Hammer: any;\r\n\r\n@Directive({\r\n  selector: '[tapClick]'\r\n})\r\nexport class TapClickDirective implements OnInit, OnDestroy {\r\n\r\n  mc: any;\r\n  clickListener: any;\r\n  @Input() tapClickDisabled: boolean;\r\n  @Output() tapClick = new EventEmitter();\r\n\r\n  constructor(private el: ElementRef, private renderer: Renderer2) {\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.setTapEvent();\r\n  }\r\n\r\n  /** Enable gestures if hammer is loaded */\r\n  setTapEvent() {\r\n\r\n    if (typeof Hammer !== 'undefined') {\r\n\r\n      // Use hammer.js tap event\r\n      this.mc = new Hammer(this.el.nativeElement);\r\n      this.mc.on('tap', () => {\r\n        if (!this.tapClickDisabled) {\r\n          this.tapClick.emit(null);\r\n        }\r\n      });\r\n    } else {\r\n      // Use normal click event\r\n      this.clickListener = this.renderer.listen(this.el.nativeElement, 'click', (e) => {\r\n        e.stopPropagation();\r\n        if (!this.tapClickDisabled) {\r\n          this.tapClick.emit(null);\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    if (this.mc) {\r\n      this.mc.destroy();\r\n    } else {\r\n      this.clickListener();\r\n    }\r\n  }\r\n}\r\n","import {\r\n  Directive,\r\n  Input,\r\n  OnInit,\r\n  ComponentFactoryResolver,\r\n  ViewContainerRef\r\n} from '@angular/core';\r\nimport { GalleryItem, GalleryItemComponent } from '../models';\r\n\r\n@Directive({\r\n  selector: '[item]'\r\n})\r\nexport class GalleryItemDirective implements OnInit {\r\n\r\n  @Input() item: GalleryItem;\r\n  @Input() type: 'slide' | 'thumb' = 'slide';\r\n\r\n  constructor(private componentFactoryResolver: ComponentFactoryResolver,\r\n              private viewContainerRef: ViewContainerRef) {\r\n  }\r\n\r\n  ngOnInit() {\r\n    const componentFactory = this.componentFactoryResolver\r\n      .resolveComponentFactory(this.item[this.type === 'slide' ? 'component' : 'thumbComponent']);\r\n    this.viewContainerRef.clear();\r\n    const componentRef = this.viewContainerRef.createComponent(componentFactory);\r\n    const galleryItem: GalleryItemComponent = componentRef.instance;\r\n    galleryItem.data = this.item.data;\r\n  }\r\n\r\n}\r\n","import { InjectionToken, NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\nimport { Gallery } from './services/gallery.service';\r\nimport { GalleryConfig } from './models';\r\nimport { GALLERY_CONFIG } from './utils/gallery.token';\r\n\r\nimport { GalleryComponent } from './components/gallery.component';\r\nimport { GalleryCoreComponent } from './components/gallery-core.component';\r\nimport { GalleryNavComponent } from './components/gallery-nav.component';\r\nimport { GalleryThumbComponent } from './components/gallery-thumb.component';\r\nimport { GalleryDotsComponent } from './components/gallery-dots.component';\r\nimport { GallerySliderComponent } from './components/gallery-slider.component';\r\nimport { GalleryCounterComponent } from './components/gallery-counter.component';\r\n\r\nimport { LazyDirective } from './directives/lazy.directive';\r\nimport { TapClickDirective } from './directives/tap-click.directive';\r\nimport { GalleryItemDirective } from './directives/gallery-item.directive';\r\nimport { ImageItemComponent } from './templates/image-item.component';\r\nimport { VideoItemComponent } from './templates/video-item.component';\r\nimport { IframeItemComponent } from './templates/iframe-item.component';\r\nimport { ThumbnailItemComponent } from './templates/thumbnail-item.component';\r\n\r\nexport function galleryFactory(galleryConfig: GalleryConfig) {\r\n  return new Gallery(galleryConfig);\r\n}\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule\r\n  ],\r\n  declarations: [\r\n    GalleryComponent,\r\n    GalleryCoreComponent,\r\n    GalleryNavComponent,\r\n    GalleryThumbComponent,\r\n    GalleryDotsComponent,\r\n    GallerySliderComponent,\r\n    GalleryCounterComponent,\r\n    ImageItemComponent,\r\n    VideoItemComponent,\r\n    IframeItemComponent,\r\n    ThumbnailItemComponent,\r\n    GalleryItemDirective,\r\n    LazyDirective,\r\n    TapClickDirective\r\n  ],\r\n  exports: [\r\n    GalleryComponent,\r\n    LazyDirective,\r\n    TapClickDirective\r\n  ],\r\n  entryComponents: [\r\n    IframeItemComponent,\r\n    ImageItemComponent,\r\n    VideoItemComponent,\r\n    ThumbnailItemComponent\r\n  ]\r\n})\r\nexport class GalleryModule {\r\n  static forRoot(config?: GalleryConfig) {\r\n\r\n    return {\r\n      ngModule: GalleryModule,\r\n      providers: [\r\n        {\r\n          provide: GALLERY_CONFIG,\r\n          useValue: config\r\n        },\r\n        {\r\n          provide: Gallery,\r\n          useFactory: galleryFactory,\r\n          deps: [GALLERY_CONFIG]\r\n        }\r\n      ]\r\n    };\r\n  }\r\n}\r\n"]}