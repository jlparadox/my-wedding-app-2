!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("rxjs/BehaviorSubject"),require("rxjs/operators/filter"),require("@angular/core"),require("@angular/platform-browser"),require("rxjs/operators/map"),require("@angular/common"),require("rxjs/operators/tap"),require("rxjs/observable/fromEvent"),require("rxjs/operators/debounceTime"),require("rxjs/Subject"),require("rxjs/operators/switchMap"),require("rxjs/observable/zip")):"function"==typeof define&&define.amd?define("@ngx-gallery/core",["exports","rxjs/BehaviorSubject","rxjs/operators/filter","@angular/core","@angular/platform-browser","rxjs/operators/map","@angular/common","rxjs/operators/tap","rxjs/observable/fromEvent","rxjs/operators/debounceTime","rxjs/Subject","rxjs/operators/switchMap","rxjs/observable/zip"],e):e((t["ngx-gallery"]=t["ngx-gallery"]||{},t["ngx-gallery"].core={}),t.rxjs.BehaviorSubject,t.rxjs["operators/filter"],t.ng.core,t.ng.platformBrowser,t.rxjs["operators/map"],t.ng.common,t.rxjs["operators/tap"],t.rxjs["observable/fromEvent"],t.rxjs["operators/debounceTime"],t.rxjs.Subject,t.rxjs["operators/switchMap"],t.rxjs["observable/zip"])}(this,function(t,i,e,r,n,s,o,a,c,h,l,u,p){"use strict";var g=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var s in e=arguments[n])Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t};function m(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,s,r=n.call(t),o=[];try{for(;(void 0===e||0<e--)&&!(i=r.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(n=r["return"])&&n.call(r)}finally{if(s)throw s.error}}return o}function d(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(m(arguments[e]));return t}var f={INITIALIZED:"initialized",ITEMS_CHANGED:"itemsChanged",INDEX_CHANGED:"indexChanged",OPENED:"opened",CLOSED:"closed"},y={action:f.INITIALIZED,currIndex:0,hasNext:!1,hasPrev:!1,items:[]},v={gestures:!0,panSensitivity:25,counter:!0,nav:!0,dots:!1,thumb:!0,thumbWidth:120,thumbHeight:90,thumbPosition:"bottom",disableThumb:!1,slidingDirection:"horizontal",zoomOut:0,loadingIcon:'<?xml version="1.0" encoding="UTF-8"?>\n<svg stroke="#fff" viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg">\n<g fill="none" fill-rule="evenodd" stroke-width="2">\n<circle cx="22" cy="22" r="1">\n<animate attributeName="r" begin="0s" calcMode="spline" dur="1.8s" keySplines="0.165, 0.84, 0.44, 1" keyTimes="0; 1" repeatCount="indefinite" values="1; 20"/>\n<animate attributeName="stroke-opacity" begin="0s" calcMode="spline" dur="1.8s" keySplines="0.3, 0.61, 0.355, 1" keyTimes="0; 1" repeatCount="indefinite" values="1; 0"/>\n</circle>\n<circle cx="22" cy="22" r="1">\n<animate attributeName="r" begin="-0.9s" calcMode="spline" dur="1.8s" keySplines="0.165, 0.84, 0.44, 1" keyTimes="0; 1" repeatCount="indefinite" values="1; 20"/>\n<animate attributeName="stroke-opacity" begin="-0.9s" calcMode="spline" dur="1.8s" keySplines="0.3, 0.61, 0.355, 1" keyTimes="0; 1" repeatCount="indefinite" values="1; 0"/>\n</circle>\n</g>\n</svg>'},b=function(){function t(t,e){void 0===t&&(t=v),void 0===e&&(e=y),this.config=t,this.state=e,this.state$=new i.BehaviorSubject(e),this.config$=new i.BehaviorSubject(v),this.setConfig(t)}return t.prototype.setConfig=function(t){this.config=g({},v,this.config,t),this.config$.next(this.config)},t.prototype.setState=function(t){this.state=g({},this.state,t),this.state$.next(this.state)},t.prototype.add=function(t,e){var n=d(this.state.items,[t]);this.setState({action:f.ITEMS_CHANGED,items:n,hasNext:1<n.length,currIndex:e?n.length-1:this.state.currIndex})},t.prototype.remove=function(t){var e=d(this.state.items.slice(0,t),this.state.items.slice(t+1,this.state.items.length));this.setState({action:f.ITEMS_CHANGED,items:e,hasNext:1<e.length,hasPrev:0<t})},t.prototype.load=function(t){t&&this.setState({action:f.ITEMS_CHANGED,items:t,hasNext:1<t.length,hasPrev:!1})},t.prototype.set=function(t){t!==this.state.currIndex&&this.setState({action:f.INDEX_CHANGED,currIndex:t,hasNext:t<this.state.items.length-1,hasPrev:0<t})},t.prototype.next=function(){this.state.hasNext?this.set(this.state.currIndex+1):this.config.loop&&this.set(0)},t.prototype.prev=function(){this.state.hasPrev?this.set(this.state.currIndex-1):this.config.loop&&this.set(this.state.items.length-1)},t.prototype.reset=function(){this.setState(y)},t.prototype.destroy=function(){this.state$.complete(),this.config$.complete()},t.prototype.initialized=function(){return this.state$.pipe(e.filter(function(t){return t.action===f.INITIALIZED}))},t.prototype.itemsChanged=function(){return this.state$.pipe(e.filter(function(t){return t.action===f.ITEMS_CHANGED}))},t.prototype.indexChanged=function(){return this.state$.pipe(e.filter(function(t){return t.action===f.INDEX_CHANGED}))},t}(),x=new r.InjectionToken("galleryConfig"),C=function(){function t(t){this._instances={},this.config=g({},v,t)}return t.prototype.ref=function(t,e){return void 0===t&&(t="root"),this._instances[t]instanceof b?this._instances[t]:(e=g({},this.config,e),this._instances[t]=new b(e))},t.prototype.destroy=function(t){void 0===t&&(t="root"),this._instances[t]instanceof b&&(this._instances[t].destroy(),this._instances[t]=null)},t.prototype.destroyAll=function(){var e=this;Object.keys(this._instances).map(function(t){e._instances[t].destory(),e._instances[t]=null})},t.prototype.resetAll=function(){var e=this;Object.keys(this._instances).map(function(t){return void 0===t&&(t="root"),e._instances[t].gallery}).map(function(t){return t.reset()})},t.decorators=[{type:r.Injectable}],t.ctorParameters=function(){return[{type:undefined,decorators:[{type:r.Inject,args:[x]}]}]},t}(),I=function(){function t(t,e){this.gallery=t,this.sanitizer=e}return t.decorators=[{type:r.Component,args:[{selector:"image-item",changeDetection:r.ChangeDetectionStrategy.OnPush,preserveWhitespaces:!1,template:'\n    <div [lazyImage]="data?.src" (loading)="loading = $event"></div>\n    <i class="g-loading" *ngIf="loading" [innerHTML]="sanitizer.bypassSecurityTrustHtml(gallery.config.loadingIcon)"></i>\n  ',styles:["\n    :host {\n      position: relative;\n      display: block;\n      width: 100%;\n      height: 100%;\n    }\n    div {\n      background-position: center center;\n      background-size: cover;\n      width: 100%;\n      height: 100%;\n    }\n  "]}]}],t.ctorParameters=function(){return[{type:C},{type:n.DomSanitizer}]},t.propDecorators={data:[{type:r.Input}]},t}(),S=function(){function t(t){this.sanitizer=t}return t.decorators=[{type:r.Component,args:[{selector:"video-item",changeDetection:r.ChangeDetectionStrategy.OnPush,preserveWhitespaces:!1,template:'\n    <video controls\n           [src]="sanitizer.bypassSecurityTrustResourceUrl(data?.src)"\n           [poster]="sanitizer.bypassSecurityTrustResourceUrl(data?.poster)"></video>\n  ',styles:["\n    video {\n      position: absolute;\n      width: 100%;\n      height: 100%;\n    }\n  "]}]}],t.ctorParameters=function(){return[{type:n.DomSanitizer}]},t.propDecorators={data:[{type:r.Input}]},t}(),D=function(){function t(t){this.sanitizer=t}return t.decorators=[{type:r.Component,args:[{selector:"iframe-item",changeDetection:r.ChangeDetectionStrategy.OnPush,preserveWhitespaces:!1,template:'\n    <iframe frameborder="0"\n            allowfullscreen\n            [src]="sanitizer.bypassSecurityTrustResourceUrl(data?.src)"></iframe>\n  ',styles:["\n    iframe {\n      position: absolute;\n      width: 100%;\n      height: 100%;\n    }\n  "]}]}],t.ctorParameters=function(){return[{type:n.DomSanitizer}]},t.propDecorators={data:[{type:r.Input}]},t}(),w=function(){function t(){}return t.decorators=[{type:r.Component,args:[{selector:"thumbnail-item",changeDetection:r.ChangeDetectionStrategy.OnPush,preserveWhitespaces:!1,template:'\n    <div [lazyImage]="data.thumb"></div>\n  ',styles:["\n    :host {\n      width: 100%;\n      height: 100%;\n    }\n    div {\n      width: 100%;\n      height: 100%;\n      background-size: cover;\n      background-position: center center;\n    }\n  "]}]}],t.ctorParameters=function(){return[]},t.propDecorators={data:[{type:r.Input}]},t}(),E=function(t,e){this.component=I,this.thumbComponent=w,this.data={src:t,thumb:e}},_=function(t,e,n){this.component=S,this.thumbComponent=w,this.data={src:t,thumb:e,poster:n}},P=function(t,e){this.component=D,this.thumbComponent=w,this.data={src:t,thumb:e}},O=function(t,e){this.component=D,this.thumbComponent=w,this.data={src:"//youtube.com/embed/"+t+"?wmode=transparent",thumb:e||"//img.youtube.com/vi/"+t+"/default.jpg"}},j=function(){function t(t){this._gallery=t,this.gestures=this._gallery.config.gestures,this.panSensitivity=this._gallery.config.panSensitivity,this.zoomOut=this._gallery.config.zoomOut,this.dots=this._gallery.config.dots,this.thumb=this._gallery.config.thumb,this.nav=this._gallery.config.nav,this.counter=this._gallery.config.counter,this.thumbWidth=this._gallery.config.thumbWidth,this.thumbHeight=this._gallery.config.thumbHeight,this.disableThumb=this._gallery.config.disableThumb,this.thumbPosition=this._gallery.config.thumbPosition,this.slidingDirection=this._gallery.config.slidingDirection,this.destroyRef=!0,this.indexChange=new r.EventEmitter,this.itemsChange=new r.EventEmitter}return t.prototype.getConfig=function(){return{gestures:this.gestures,panSensitivity:this.panSensitivity,zoomOut:this.zoomOut,counter:this.counter,nav:this.nav,dots:this.dots,thumb:this.thumb,thumbWidth:this.thumbWidth,thumbHeight:this.thumbHeight,thumbPosition:this.thumbPosition,disableThumb:this.disableThumb,slidingDirection:this.slidingDirection}},t.prototype.onIndexChange=function(t){switch(t){case"next":this.galleryRef.next();break;case"prev":this.galleryRef.prev();break;default:this.galleryRef.set(t)}},t.prototype.ngOnChanges=function(){this.galleryRef instanceof b&&(this.galleryRef.setConfig(this.getConfig()),this.items!==this.galleryRef.state.items&&this.load(this.items))},t.prototype.ngOnInit=function(){var e=this;this.galleryRef=this._gallery.ref(this.id),this.galleryRef.setConfig(this.getConfig()),this.load(this.items),this.indexChange.observers.length&&(this._indexChange$=this.galleryRef.indexChanged().subscribe(function(t){return e.indexChange.next(t)})),this.itemsChange.observers.length&&(this._itemChange$=this.galleryRef.itemsChanged().subscribe(function(t){return e.itemsChange.next(t)}))},t.prototype.ngOnDestroy=function(){this._indexChange$&&this._indexChange$.unsubscribe(),this._itemChange$&&this._itemChange$.unsubscribe(),this.destroyRef&&this.galleryRef.reset()},t.prototype.load=function(t){this.galleryRef.load(t)},t.prototype.add=function(t,e){this.galleryRef.add(t,e)},t.prototype.remove=function(t){this.galleryRef.remove(t)},t.prototype.next=function(){this.galleryRef.next()},t.prototype.prev=function(){this.galleryRef.prev()},t.prototype.set=function(t){this.galleryRef.set(t)},t.prototype.reset=function(){this.galleryRef.reset()},t.decorators=[{type:r.Component,args:[{selector:"gallery",changeDetection:r.ChangeDetectionStrategy.OnPush,preserveWhitespaces:!1,template:'\n    <gallery-core [state]="galleryRef.state$ | async"\n                  [config]="galleryRef.config$ | async"\n                  (indexChange)="onIndexChange($event)"></gallery-core>\n    <ng-content></ng-content>\n  '}]}],t.ctorParameters=function(){return[{type:C}]},t.propDecorators={id:[{type:r.Input}],items:[{type:r.Input}],gestures:[{type:r.Input}],panSensitivity:[{type:r.Input}],zoomOut:[{type:r.Input}],dots:[{type:r.Input}],thumb:[{type:r.Input}],nav:[{type:r.Input}],counter:[{type:r.Input}],thumbWidth:[{type:r.Input}],thumbHeight:[{type:r.Input}],disableThumb:[{type:r.Input}],thumbPosition:[{type:r.Input}],slidingDirection:[{type:r.Input}],destroyRef:[{type:r.Input}],indexChange:[{type:r.Output}],itemsChange:[{type:r.Output}]},t}(),$=function(){function t(){this.indexChange=new r.EventEmitter}return Object.defineProperty(t.prototype,"thumbPosition",{get:function(){return this.config.thumbPosition},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"slidingDirection",{get:function(){return this.config.slidingDirection},enumerable:!0,configurable:!0}),t.decorators=[{type:r.Component,args:[{selector:"gallery-core",changeDetection:r.ChangeDetectionStrategy.OnPush,preserveWhitespaces:!1,template:'\n    <gallery-thumb *ngIf="config.thumb"\n                  [state]="state"\n                  [config]="config"\n                  (indexChange)="indexChange.emit($event)">\n    </gallery-thumb>\n    <div class="g-box">\n      <gallery-slider [state]="state"\n                      [config]="config"\n                      (indexChange)="indexChange.emit($event)">\n        <gallery-nav *ngIf="config.nav && state.items.length > 1"\n                    [state]="state"\n                    [config]="config"\n                    (indexChange)="indexChange.emit($event)">\n        </gallery-nav>\n      </gallery-slider>\n      <gallery-dots *ngIf="config.dots"\n                    [state]="state"\n                    (indexChange)="indexChange.emit($event)">\n      </gallery-dots>\n      <gallery-counter *ngIf="config.counter"\n                      [state]="state">\n      </gallery-counter>\n    </div>\n  '}]}],t.ctorParameters=function(){return[]},t.propDecorators={state:[{type:r.Input}],config:[{type:r.Input}],indexChange:[{type:r.Output}],thumbPosition:[{type:r.HostBinding,args:["attr.thumbPosition"]}],slidingDirection:[{type:r.HostBinding,args:["attr.slidingDirection"]}]},t}(),k=function(){function t(){this.indexChange=new r.EventEmitter}return t.decorators=[{type:r.Component,args:[{selector:"gallery-nav",changeDetection:r.ChangeDetectionStrategy.OnPush,preserveWhitespaces:!1,template:'\n    <i *ngIf="config.loop || state.hasPrev" class="g-nav-prev" (tapClick)="indexChange.emit(\'prev\')"></i>\n    <i *ngIf="config.loop || state.hasNext" class="g-nav-next" (tapClick)="indexChange.emit(\'next\')"></i>\n  '}]}],t.ctorParameters=function(){return[]},t.propDecorators={state:[{type:r.Input}],config:[{type:r.Input}],indexChange:[{type:r.Output}]},t}(),R=function(){function t(t){var e=this;this._el=t,this.stateStream$=new i.BehaviorSubject({value:0,active:!1}),this.indexChange=new r.EventEmitter,this.thumbState$=this.stateStream$.pipe(s.map(function(t){return{style:e.thumbsStyle(t.value),active:t.active}}))}return t.prototype.ngOnChanges=function(){this.stateStream$.next({value:0,active:!1})},t.prototype.ngOnInit=function(){var e=this;this.config.gestures&&!this.config.disableThumb&&"undefined"!=typeof Hammer&&(this.mc=new Hammer(this._el.nativeElement),this.mc.get("pan").set({direction:Hammer.DIRECTION_ALL}),this.mc.on("pan",function(t){switch(e.config.thumbPosition){case"right":case"left":e.stateStream$.next({value:t.deltaY,active:!0}),t.isFinal&&(e.stateStream$.next({value:0,active:!1}),e.verticalPan(t));break;case"top":case"bottom":e.stateStream$.next({value:t.deltaX,active:!0}),t.isFinal&&(e.stateStream$.next({value:0,active:!1}),e.horizontalPan(t))}}))},t.prototype.ngOnDestroy=function(){this.mc&&this.mc.destroy()},t.prototype.thumbsStyle=function(t){switch(this.config.thumbPosition){case"top":case"bottom":return this.height=this.config.thumbHeight+"px",{transform:"translate3d("+(-this.state.currIndex*this.config.thumbWidth-(this.config.thumbWidth/2-t))+"px, 0, 0)",width:this.state.items.length*this.config.thumbWidth+"px",height:"100%"};case"left":case"right":return this.width=this.config.thumbWidth+"px",{transform:"translate3d(0, "+(-this.state.currIndex*this.config.thumbHeight-(this.config.thumbHeight/2-t))+"px, 0)",width:"100%",height:this.state.items.length*this.config.thumbHeight+"px"}}},t.prototype.verticalPan=function(t){.3<t.velocityY?this.indexChange.emit("prev"):t.velocityY<-.3?this.indexChange.emit("next"):t.deltaY/2<=-this.config.thumbHeight*this.state.items.length/this.config.panSensitivity?this.indexChange.emit("next"):t.deltaY/2>=this.config.thumbHeight*this.state.items.length/this.config.panSensitivity?this.indexChange.emit("prev"):this.indexChange.emit(this.state.currIndex)},t.prototype.horizontalPan=function(t){.3<t.velocityX?this.indexChange.emit("prev"):t.velocityX<-.3?this.indexChange.emit("next"):t.deltaX/2<=-this.config.thumbWidth*this.state.items.length/this.config.panSensitivity?this.indexChange.emit("next"):t.deltaX/2>=this.config.thumbWidth*this.state.items.length/this.config.panSensitivity?this.indexChange.emit("prev"):this.indexChange.emit(this.state.currIndex)},t.decorators=[{type:r.Component,args:[{selector:"gallery-thumb",changeDetection:r.ChangeDetectionStrategy.OnPush,preserveWhitespaces:!1,template:'\n    <div *ngIf="thumbState$ | async; let thumbState"\n         class="g-thumb-container">\n      <div class="g-thumbs"\n           [class.-no-transition]="thumbState.active"\n           [ngStyle]="thumbState.style">\n        <div *ngFor="let item of state.items;let i = index"\n             class="g-thumb"\n             [class.-current]="i === state.currIndex"\n             (tapClick)="indexChange.emit(i)"\n             [tapClickDisabled]="config.disableThumb">\n          <ng-container [item]="item" type="thumb"></ng-container>\n        </div>\n      </div>\n    </div>\n  '}]}],t.ctorParameters=function(){return[{type:r.ElementRef}]},t.propDecorators={state:[{type:r.Input}],config:[{type:r.Input}],indexChange:[{type:r.Output}],height:[{type:r.HostBinding,args:["style.height"]}],width:[{type:r.HostBinding,args:["style.width"]}]},t}(),z=function(){function t(){this.indexChange=new r.EventEmitter}return t.decorators=[{type:r.Component,args:[{selector:"gallery-dots",changeDetection:r.ChangeDetectionStrategy.OnPush,preserveWhitespaces:!1,template:'\n    <div class="g-dot"\n         *ngFor="let item of state.items; let i = index"\n         (tapClick)="indexChange.emit(i)">\n      <div class="g-dot-inner"\n           [class.-current]="i === state.currIndex"></div>\n    </div>\n  '}]}],t.ctorParameters=function(){return[]},t.propDecorators={state:[{type:r.Input}],indexChange:[{type:r.Output}]},t}(),H=function(){function t(t,e){var n=this;this._el=t,this.platform=e,this.stateStream$=new i.BehaviorSubject({value:0,active:!1}),this.indexChange=new r.EventEmitter,this.sliderState$=this.stateStream$.pipe(s.map(function(t){return{style:n.sliderStyle(t.value),active:t.active}}))}return t.prototype.viewDepth=function(){return{transform:"perspective(50px) translate3d(0, 0, "+-this.config.zoomOut+"px)"}},t.prototype.sliderStyle=function(t){switch(this.config.slidingDirection){case"horizontal":return{transform:"translate3d("+(-this.state.currIndex*this._el.nativeElement.offsetWidth+t)+"px, 0, 0)",width:this._el.nativeElement.offsetWidth*this.state.items.length+"px",height:"100%"};case"vertical":return{transform:"translate3d(0, "+(-this.state.currIndex*this._el.nativeElement.offsetHeight+t)+"px, 0)",width:"100%",height:this._el.nativeElement.offsetHeight*this.state.items.length+"px"}}},t.prototype.ngOnChanges=function(){this.stateStream$.next({value:0,active:!1})},t.prototype.ngOnInit=function(){var e=this;this.config.gestures&&"undefined"!=typeof Hammer&&(this.mc=new Hammer(this._el.nativeElement),this.mc.get("pan").set({direction:Hammer.DIRECTION_ALL}),this.mc.on("pan",function(t){switch(e.config.slidingDirection){case"horizontal":e.stateStream$.next({value:t.deltaX,active:!0}),t.isFinal&&(e.stateStream$.next({value:0,active:!1}),e.horizontalPan(t));break;case"vertical":e.stateStream$.next({value:t.deltaY,active:!0}),t.isFinal&&(e.stateStream$.next({value:0,active:!1}),e.verticalPan(t))}})),o.isPlatformBrowser(this.platform)&&(this.resizeSub$=c.fromEvent(window,"resize").pipe(h.debounceTime(200),a.tap(function(){return e.stateStream$.next(e.stateStream$.getValue())})).subscribe()),setTimeout(function(){e.stateStream$.next({value:0,active:!1})},300)},t.prototype.ngOnDestroy=function(){this.mc&&this.mc.destroy(),this.resizeSub$&&this.resizeSub$.unsubscribe()},t.prototype.verticalPan=function(t){.3<t.velocityY?this.indexChange.emit("prev"):t.velocityY<-.3?this.indexChange.emit("next"):t.deltaY/2<=-this._el.nativeElement.offsetHeight*this.state.items.length/this.config.panSensitivity?this.indexChange.emit("next"):t.deltaY/2>=this._el.nativeElement.offsetHeight*this.state.items.length/this.config.panSensitivity?this.indexChange.emit("prev"):this.indexChange.emit(this.state.currIndex)},t.prototype.horizontalPan=function(t){.3<t.velocityX?this.indexChange.emit("prev"):t.velocityX<-.3?this.indexChange.emit("next"):t.deltaX/2<=-this._el.nativeElement.offsetWidth*this.state.items.length/this.config.panSensitivity?this.indexChange.emit("next"):t.deltaX/2>=this._el.nativeElement.offsetWidth*this.state.items.length/this.config.panSensitivity?this.indexChange.emit("prev"):this.indexChange.emit(this.state.currIndex)},t.decorators=[{type:r.Component,args:[{selector:"gallery-slider",changeDetection:r.ChangeDetectionStrategy.OnPush,preserveWhitespaces:!1,template:'\n    <div *ngIf="sliderState$ | async; let sliderState"\n         class="slides-container"\n         [ngStyle]="viewDepth()">\n      <div class="slides"\n           [class.-no-transition]="sliderState.active"\n           [ngStyle]="sliderState.style">\n        <div *ngFor="let item of state.items" class="slide">\n          <ng-container [item]="item"></ng-container>\n        </div>\n      </div>\n    </div>\n    <ng-content></ng-content>\n  '}]}],t.ctorParameters=function(){return[{type:r.ElementRef},{type:Object,decorators:[{type:r.Inject,args:[r.PLATFORM_ID]}]}]},t.propDecorators={state:[{type:r.Input}],config:[{type:r.Input}],width:[{type:r.Input}],height:[{type:r.Input}],indexChange:[{type:r.Output}]},t}(),T=function(){function t(){}return t.decorators=[{type:r.Component,args:[{selector:"gallery-counter",changeDetection:r.ChangeDetectionStrategy.OnPush,preserveWhitespaces:!1,template:"<div class=\"g-counter\">{{(state.currIndex + 1) + '/' + state.items.length}}</div>"}]}],t.ctorParameters=function(){return[]},t.propDecorators={state:[{type:r.Input}]},t}(),N=function(){function t(t,e){var i=this;this._el=t,this._renderer=e,this._worker$=new l.Subject,this.loading=new r.EventEmitter;var s=new Image;this._worker$.pipe(u.switchMap(function(t){i.loading.emit(!0),s.src=t;var e=c.fromEvent(s,"load").pipe(a.tap(function(){i._renderer.setStyle(i._el.nativeElement,"backgroundImage","url("+t+")"),i.loading.emit(!1)})),n=c.fromEvent(s,"error").pipe(a.tap(function(){return i.loading.emit(!1)}));return p.zip(e,n)})).subscribe()}return Object.defineProperty(t.prototype,"lazyImage",{set:function(t){this.loadImage(t)},enumerable:!0,configurable:!0}),t.prototype.loadImage=function(t){this._worker$.next(t)},t.prototype.ngOnDestroy=function(){this._worker$.complete()},t.decorators=[{type:r.Directive,args:[{selector:"[lazyImage]"}]}],t.ctorParameters=function(){return[{type:r.ElementRef},{type:r.Renderer2}]},t.propDecorators={lazyImage:[{type:r.Input,args:["lazyImage"]}],loading:[{type:r.Output}]},t}(),W=function(){function t(t,e){this.el=t,this.renderer=e,this.tapClick=new r.EventEmitter}return t.prototype.ngOnInit=function(){this.setTapEvent()},t.prototype.setTapEvent=function(){var e=this;"undefined"!=typeof Hammer?(this.mc=new Hammer(this.el.nativeElement),this.mc.on("tap",function(){e.tapClickDisabled||e.tapClick.emit(null)})):this.clickListener=this.renderer.listen(this.el.nativeElement,"click",function(t){t.stopPropagation(),e.tapClickDisabled||e.tapClick.emit(null)})},t.prototype.ngOnDestroy=function(){this.mc?this.mc.destroy():this.clickListener()},t.decorators=[{type:r.Directive,args:[{selector:"[tapClick]"}]}],t.ctorParameters=function(){return[{type:r.ElementRef},{type:r.Renderer2}]},t.propDecorators={tapClickDisabled:[{type:r.Input}],tapClick:[{type:r.Output}]},t}(),M=function(){function t(t,e){this.componentFactoryResolver=t,this.viewContainerRef=e,this.type="slide"}return t.prototype.ngOnInit=function(){var t=this.componentFactoryResolver.resolveComponentFactory(this.item["slide"===this.type?"component":"thumbComponent"]);this.viewContainerRef.clear(),this.viewContainerRef.createComponent(t).instance.data=this.item.data},t.decorators=[{type:r.Directive,args:[{selector:"[item]"}]}],t.ctorParameters=function(){return[{type:r.ComponentFactoryResolver},{type:r.ViewContainerRef}]},t.propDecorators={item:[{type:r.Input}],type:[{type:r.Input}]},t}();function A(t){return new C(t)}var F=function(){function e(){}return e.forRoot=function(t){return{ngModule:e,providers:[{provide:x,useValue:t},{provide:C,useFactory:A,deps:[x]}]}},e.decorators=[{type:r.NgModule,args:[{imports:[o.CommonModule],declarations:[j,$,k,R,z,H,T,I,S,D,w,M,N,W],exports:[j,N,W],entryComponents:[D,I,S,w]}]}],e.ctorParameters=function(){return[]},e}();t.Gallery=C,t.GalleryRef=b,t.GalleryAction=f,t.ImageItem=E,t.VideoItem=_,t.IframeItem=P,t.YoutubeItem=O,t.ImageItemComponent=I,t.VideoItemComponent=S,t.IframeItemComponent=D,t.ThumbnailItemComponent=w,t.galleryFactory=A,t.GalleryModule=F,t.ɵe=$,t.ɵj=T,t.ɵh=z,t.ɵf=k,t.ɵi=H,t.ɵg=R,t.ɵd=j,t.ɵo=M,t.ɵp=N,t.ɵq=W,t.ɵm=D,t.ɵk=I,t.ɵn=w,t.ɵl=S,t.ɵa=x,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=ngx-gallery-core.umd.min.js.map