{"version":3,"file":"ngx-gallery-core.umd.js.map","sources":[null,"ng://@ngx-gallery/core/models/index.ts","ng://@ngx-gallery/core/utils/gallery.default.ts","ng://@ngx-gallery/core/services/gallery-ref.ts","ng://@ngx-gallery/core/utils/gallery.token.ts","ng://@ngx-gallery/core/services/gallery.service.ts","ng://@ngx-gallery/core/templates/image-item.component.ts","ng://@ngx-gallery/core/templates/video-item.component.ts","ng://@ngx-gallery/core/templates/iframe-item.component.ts","ng://@ngx-gallery/core/templates/thumbnail-item.component.ts","ng://@ngx-gallery/core/templates/index.ts","ng://@ngx-gallery/core/components/gallery.component.ts","ng://@ngx-gallery/core/components/gallery-core.component.ts","ng://@ngx-gallery/core/components/gallery-nav.component.ts","ng://@ngx-gallery/core/components/gallery-thumb.component.ts","ng://@ngx-gallery/core/components/gallery-dots.component.ts","ng://@ngx-gallery/core/components/gallery-slider.component.ts","ng://@ngx-gallery/core/components/gallery-counter.component.ts","ng://@ngx-gallery/core/directives/lazy.directive.ts","ng://@ngx-gallery/core/directives/tap-click.directive.ts","ng://@ngx-gallery/core/directives/gallery-item.directive.ts","ng://@ngx-gallery/core/gallery.module.ts"],"sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = Object.setPrototypeOf ||\r\n    ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n    function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = Object.assign || function __assign(t) {\r\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n        s = arguments[i];\r\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n    }\r\n    return t;\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\r\n            t[p[i]] = s[p[i]];\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = y[op[0] & 2 ? \"return\" : op[0] ? \"throw\" : \"next\"]) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [0, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r);  }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { if (o[n]) i[n] = function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; }; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator];\r\n    return m ? m.call(o) : typeof __values === \"function\" ? __values(o) : o[Symbol.iterator]();\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n","import { Type } from '@angular/core';\r\n\r\nexport interface GalleryState {\r\n  action?: GalleryAction;\r\n  items?: GalleryItem[];\r\n  currIndex?: number;\r\n  hasNext?: boolean;\r\n  hasPrev?: boolean;\r\n}\r\n\r\nexport interface GalleryItem {\r\n  data?: any;\r\n  component?: Type<any>;\r\n  thumbComponent?: Type<any>;\r\n}\r\n\r\nexport enum GalleryAction {\r\n  INITIALIZED = 'initialized',\r\n  ITEMS_CHANGED = 'itemsChanged',\r\n  INDEX_CHANGED = 'indexChanged',\r\n  OPENED = 'opened',\r\n  CLOSED = 'closed'\r\n}\r\n\r\nexport interface GalleryConfig {\r\n  gestures?: boolean;\r\n  loop?: boolean;\r\n  panSensitivity?: number;\r\n  nav?: boolean;\r\n  dots?: boolean;\r\n  counter?: boolean;\r\n  thumb?: boolean;\r\n  thumbWidth?: number;\r\n  thumbHeight?: number;\r\n  thumbPosition?: 'top' | 'left' | 'right' | 'bottom';\r\n  disableThumb?: boolean;\r\n  zoomOut?: number;\r\n  slidingDirection?: 'horizontal' | 'vertical';\r\n  loadingIcon?: string;\r\n}\r\n\r\nexport interface GalleryItemComponent {\r\n  data: any;\r\n  index?: number;\r\n}\r\n","import { GalleryAction, GalleryConfig, GalleryState } from '../models';\r\n\r\n/** Initial state */\r\nexport const defaultState: GalleryState = {\r\n  action: GalleryAction.INITIALIZED,\r\n  currIndex: 0,\r\n  hasNext: false,\r\n  hasPrev: false,\r\n  items: []\r\n};\r\n\r\nexport const defaultConfig: GalleryConfig = {\r\n  gestures: true,\r\n  panSensitivity: 25,\r\n  counter: true,\r\n  nav: true,\r\n  dots: false,\r\n  thumb: true,\r\n  thumbWidth: 120,\r\n  thumbHeight: 90,\r\n  thumbPosition: 'bottom',\r\n  disableThumb: false,\r\n  slidingDirection: 'horizontal',\r\n  zoomOut: 0,\r\n  loadingIcon: `<?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<svg stroke=\"#fff\" viewBox=\"0 0 44 44\" xmlns=\"http://www.w3.org/2000/svg\">\r\n<g fill=\"none\" fill-rule=\"evenodd\" stroke-width=\"2\">\r\n<circle cx=\"22\" cy=\"22\" r=\"1\">\r\n<animate attributeName=\"r\" begin=\"0s\" calcMode=\"spline\" dur=\"1.8s\" keySplines=\"0.165, 0.84, 0.44, 1\" keyTimes=\"0; 1\" repeatCount=\"indefinite\" values=\"1; 20\"/>\r\n<animate attributeName=\"stroke-opacity\" begin=\"0s\" calcMode=\"spline\" dur=\"1.8s\" keySplines=\"0.3, 0.61, 0.355, 1\" keyTimes=\"0; 1\" repeatCount=\"indefinite\" values=\"1; 0\"/>\r\n</circle>\r\n<circle cx=\"22\" cy=\"22\" r=\"1\">\r\n<animate attributeName=\"r\" begin=\"-0.9s\" calcMode=\"spline\" dur=\"1.8s\" keySplines=\"0.165, 0.84, 0.44, 1\" keyTimes=\"0; 1\" repeatCount=\"indefinite\" values=\"1; 20\"/>\r\n<animate attributeName=\"stroke-opacity\" begin=\"-0.9s\" calcMode=\"spline\" dur=\"1.8s\" keySplines=\"0.3, 0.61, 0.355, 1\" keyTimes=\"0; 1\" repeatCount=\"indefinite\" values=\"1; 0\"/>\r\n</circle>\r\n</g>\r\n</svg>`\r\n};\r\n","import { BehaviorSubject } from 'rxjs/BehaviorSubject';\r\nimport { filter } from 'rxjs/operators/filter';\r\nimport { Observable } from 'rxjs/Observable';\r\nimport { defaultConfig, defaultState } from '../utils/gallery.default';\r\nimport {\r\n  GalleryState,\r\n  GalleryConfig,\r\n  GalleryAction,\r\n  GalleryItem\r\n} from '../models';\r\n\r\nexport class GalleryRef {\r\n  state$: BehaviorSubject<GalleryState>;\r\n  config$: BehaviorSubject<GalleryConfig>;\r\n\r\n  constructor(\r\n    public config: GalleryConfig = defaultConfig,\r\n    public state: GalleryState = defaultState\r\n  ) {\r\n    this.state$ = new BehaviorSubject<GalleryState>(state);\r\n    this.config$ = new BehaviorSubject<GalleryConfig>(defaultConfig);\r\n    this.setConfig(config);\r\n  }\r\n\r\n  /**\r\n   * Set gallery config\r\n   * @param config\r\n   */\r\n  setConfig(config: GalleryConfig) {\r\n    this.config = { ...defaultConfig, ...this.config, ...config };\r\n    this.config$.next(this.config);\r\n  }\r\n\r\n  /**\r\n   * Set gallery state\r\n   * @param state\r\n   */\r\n  setState(state: GalleryState) {\r\n    this.state = { ...this.state, ...state };\r\n    this.state$.next(this.state);\r\n  }\r\n\r\n  /** Add gallery item\r\n   * @param item - Gallery item object\r\n   * @param active - Set the new item as current slide\r\n   */\r\n  add(item: GalleryItem, active?: boolean) {\r\n    const items = [...this.state.items, item];\r\n    this.setState({\r\n      action: GalleryAction.ITEMS_CHANGED,\r\n      items: items,\r\n      hasNext: items.length > 1,\r\n      currIndex: active ? items.length - 1 : this.state.currIndex\r\n    });\r\n  }\r\n\r\n  /** Remove gallery item\r\n   * @param i - Item index\r\n   */\r\n  remove(i: number) {\r\n    const items = [\r\n      ...this.state.items.slice(0, i),\r\n      ...this.state.items.slice(i + 1, this.state.items.length)\r\n    ];\r\n    this.setState({\r\n      action: GalleryAction.ITEMS_CHANGED,\r\n      items: items,\r\n      hasNext: items.length > 1,\r\n      hasPrev: i > 0\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Load items and reset the state\r\n   * @param items - Gallery images data\r\n   */\r\n  load(items: GalleryItem[]) {\r\n    if (items) {\r\n      this.setState({\r\n        action: GalleryAction.ITEMS_CHANGED,\r\n        items: items,\r\n        hasNext: items.length > 1,\r\n        hasPrev: false\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Set active item\r\n   * @param i - Active Index\r\n   * @param action - Action type\r\n   */\r\n  set(i: number) {\r\n    if (i !== this.state.currIndex) {\r\n      this.setState({\r\n        action: GalleryAction.INDEX_CHANGED,\r\n        currIndex: i,\r\n        hasNext: i < this.state.items.length - 1,\r\n        hasPrev: i > 0\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Next item\r\n   */\r\n  next() {\r\n    if (this.state.hasNext) {\r\n      this.set(this.state.currIndex + 1);\r\n    } else if (this.config.loop) {\r\n      this.set(0);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Prev item\r\n   */\r\n  prev() {\r\n    if (this.state.hasPrev) {\r\n      this.set(this.state.currIndex - 1);\r\n    } else if (this.config.loop) {\r\n      this.set(this.state.items.length - 1);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Reset gallery to initial state\r\n   */\r\n  reset() {\r\n    this.setState(defaultState);\r\n  }\r\n\r\n  /**\r\n   * Destroy GalleryRef (for internal use only)\r\n   */\r\n  destroy() {\r\n    this.state$.complete();\r\n    this.config$.complete();\r\n  }\r\n\r\n  /** Gallery Events */\r\n\r\n  /**\r\n   * Stream that emits when gallery is initialized/reset\r\n   */\r\n  initialized(): Observable<GalleryState> {\r\n    return this.state$.pipe(\r\n      filter(\r\n        (state: GalleryState) => state.action === GalleryAction.INITIALIZED\r\n      )\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Stream that emits when items is changed (items loaded, item added, item removed)\r\n   */\r\n  itemsChanged(): Observable<GalleryState> {\r\n    return this.state$.pipe(\r\n      filter(\r\n        (state: GalleryState) => state.action === GalleryAction.ITEMS_CHANGED\r\n      )\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Stream that emits when current item is changed\r\n   */\r\n  indexChanged(): Observable<GalleryState> {\r\n    return this.state$.pipe(\r\n      filter(\r\n        (state: GalleryState) => state.action === GalleryAction.INDEX_CHANGED\r\n      )\r\n    );\r\n  }\r\n}\r\n","import { InjectionToken } from '@angular/core';\r\nimport { GalleryConfig } from '../models';\r\n\r\nexport const GALLERY_CONFIG = new InjectionToken<GalleryConfig>('galleryConfig');\r\n","import { Inject, Injectable } from '@angular/core';\r\n\r\nimport { GalleryRef } from './gallery-ref';\r\nimport { GALLERY_CONFIG } from '../utils/gallery.token';\r\nimport { defaultConfig } from '../utils/gallery.default';\r\nimport { GalleryConfig } from '../models';\r\n\r\n@Injectable()\r\nexport class Gallery {\r\n\r\n  /** Stores GalleryRef instances */\r\n  private readonly _instances = {};\r\n\r\n  /** Global config */\r\n  config: GalleryConfig;\r\n\r\n  constructor(@Inject(GALLERY_CONFIG) config: GalleryConfig) {\r\n    this.config = {...defaultConfig, ...config};\r\n  }\r\n\r\n  /**\r\n   * Returns Gallery by ID\r\n   */\r\n  ref(id = 'root', config?: GalleryConfig) {\r\n    if (this._instances[id] instanceof GalleryRef) {\r\n      return this._instances[id];\r\n    } else {\r\n      config = {...this.config, ...config};\r\n      return this._instances[id] = new GalleryRef(config);\r\n    }\r\n  }\r\n\r\n  destroy(id = 'root') {\r\n    if (this._instances[id] instanceof GalleryRef) {\r\n      this._instances[id].destroy();\r\n      this._instances[id] = null;\r\n    }\r\n  }\r\n\r\n  destroyAll() {\r\n    Object.keys(this._instances)\r\n      .map((key) => {\r\n        this._instances[key].destory();\r\n        this._instances[key] = null;\r\n      });\r\n  }\r\n\r\n  resetAll() {\r\n    Object.keys(this._instances)\r\n      .map((id = 'root') => this._instances[id].gallery)\r\n      .map((gallery: GalleryRef) => gallery.reset());\r\n  }\r\n\r\n}\r\n","import { ChangeDetectionStrategy, Component, Input } from '@angular/core';\r\nimport { DomSanitizer } from '@angular/platform-browser';\r\nimport { GalleryItemComponent } from '../models';\r\nimport { Gallery } from '../services/gallery.service';\r\n\r\n@Component({\r\n  selector: 'image-item',\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n  preserveWhitespaces: false,\r\n  template: `\r\n    <div [lazyImage]=\"data?.src\" (loading)=\"loading = $event\"></div>\r\n    <i class=\"g-loading\" *ngIf=\"loading\" [innerHTML]=\"sanitizer.bypassSecurityTrustHtml(gallery.config.loadingIcon)\"></i>\r\n  `,\r\n  styles: [`\r\n    :host {\r\n      position: relative;\r\n      display: block;\r\n      width: 100%;\r\n      height: 100%;\r\n    }\r\n    div {\r\n      background-position: center center;\r\n      background-size: cover;\r\n      width: 100%;\r\n      height: 100%;\r\n    }\r\n  `],\r\n})\r\nexport class ImageItemComponent implements GalleryItemComponent {\r\n\r\n  loading: boolean;\r\n  @Input() data: any;\r\n\r\n  constructor(public gallery: Gallery, public sanitizer: DomSanitizer) {\r\n  }\r\n}\r\n","import { ChangeDetectionStrategy, Component, Input } from '@angular/core';\r\nimport { DomSanitizer } from '@angular/platform-browser';\r\nimport { GalleryItemComponent } from '../models';\r\n\r\n@Component({\r\n  selector: 'video-item',\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n  preserveWhitespaces: false,\r\n  template: `\r\n    <video controls\r\n           [src]=\"sanitizer.bypassSecurityTrustResourceUrl(data?.src)\"\r\n           [poster]=\"sanitizer.bypassSecurityTrustResourceUrl(data?.poster)\"></video>\r\n  `,\r\n  styles: [`\r\n    video {\r\n      position: absolute;\r\n      width: 100%;\r\n      height: 100%;\r\n    }\r\n  `]\r\n})\r\nexport class VideoItemComponent implements GalleryItemComponent {\r\n\r\n  @Input() data: any;\r\n\r\n  constructor(public sanitizer: DomSanitizer) {\r\n  }\r\n}\r\n","import { ChangeDetectionStrategy, Component, Input } from '@angular/core';\r\nimport { DomSanitizer } from '@angular/platform-browser';\r\nimport { GalleryItemComponent } from '../models';\r\n\r\n@Component({\r\n  selector: 'iframe-item',\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n  preserveWhitespaces: false,\r\n  template: `\r\n    <iframe frameborder=\"0\"\r\n            allowfullscreen\r\n            [src]=\"sanitizer.bypassSecurityTrustResourceUrl(data?.src)\"></iframe>\r\n  `,\r\n  styles: [`\r\n    iframe {\r\n      position: absolute;\r\n      width: 100%;\r\n      height: 100%;\r\n    }\r\n  `]\r\n})\r\nexport class IframeItemComponent implements GalleryItemComponent {\r\n\r\n  @Input() data;\r\n\r\n  constructor(public sanitizer: DomSanitizer) {\r\n  }\r\n}\r\n","import { ChangeDetectionStrategy, Component, Input } from '@angular/core';\r\nimport { GalleryItemComponent } from '../models';\r\n\r\n@Component({\r\n  selector: 'thumbnail-item',\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n  preserveWhitespaces: false,\r\n  template: `\r\n    <div [lazyImage]=\"data.thumb\"></div>\r\n  `,\r\n  styles: [`\r\n    :host {\r\n      width: 100%;\r\n      height: 100%;\r\n    }\r\n    div {\r\n      width: 100%;\r\n      height: 100%;\r\n      background-size: cover;\r\n      background-position: center center;\r\n    }\r\n  `]\r\n})\r\nexport class ThumbnailItemComponent implements GalleryItemComponent {\r\n  @Input() data: any;\r\n}\r\n","import { ImageItemComponent } from './image-item.component';\r\nimport { VideoItemComponent } from './video-item.component';\r\nimport { IframeItemComponent } from './iframe-item.component';\r\nimport { ThumbnailItemComponent } from './thumbnail-item.component';\r\nimport { GalleryItem } from '../models';\r\n\r\nexport class ImageItem implements GalleryItem {\r\n  public component = ImageItemComponent;\r\n  public thumbComponent = ThumbnailItemComponent;\r\n  public data: any;\r\n\r\n  constructor(src: string, thumb?: string) {\r\n    this.data = {src, thumb};\r\n  }\r\n}\r\n\r\nexport class VideoItem implements GalleryItem {\r\n  public component = VideoItemComponent;\r\n  public thumbComponent = ThumbnailItemComponent;\r\n  public data: any;\r\n\r\n  constructor(src: string, thumb?: string, poster?: string) {\r\n    this.data = {src, thumb, poster};\r\n  }\r\n}\r\n\r\nexport class IframeItem implements GalleryItem {\r\n  public component = IframeItemComponent;\r\n  public thumbComponent = ThumbnailItemComponent;\r\n  public data: any;\r\n\r\n  constructor(src: string, thumb?: string) {\r\n    this.data = {src, thumb};\r\n  }\r\n}\r\n\r\nexport class YoutubeItem implements GalleryItem {\r\n  public component = IframeItemComponent;\r\n  public thumbComponent = ThumbnailItemComponent;\r\n  public data: any;\r\n\r\n  constructor(src: string, thumb?: string) {\r\n    this.data = {\r\n      src: `//youtube.com/embed/${src}?wmode=transparent`,\r\n      thumb: thumb ? thumb : `//img.youtube.com/vi/${src}/default.jpg`\r\n    };\r\n  }\r\n}\r\n\r\nexport {\r\n  ImageItemComponent,\r\n  VideoItemComponent,\r\n  IframeItemComponent,\r\n  ThumbnailItemComponent\r\n};\r\n","import {\r\n  Component,\r\n  Input,\r\n  OnDestroy,\r\n  OnInit,\r\n  OnChanges,\r\n  Output,\r\n  ChangeDetectionStrategy,\r\n  EventEmitter\r\n} from '@angular/core';\r\nimport { Gallery } from '../services/gallery.service';\r\nimport { GalleryRef } from '../services/gallery-ref';\r\nimport { GalleryItem, GalleryState } from '../models';\r\nimport { Subscription } from 'rxjs/Subscription';\r\n\r\n@Component({\r\n  selector: 'gallery',\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n  preserveWhitespaces: false,\r\n  template: `\r\n    <gallery-core [state]=\"galleryRef.state$ | async\"\r\n                  [config]=\"galleryRef.config$ | async\"\r\n                  (indexChange)=\"onIndexChange($event)\"></gallery-core>\r\n    <ng-content></ng-content>\r\n  `\r\n})\r\nexport class GalleryComponent implements OnInit, OnChanges, OnDestroy {\r\n\r\n  galleryRef: GalleryRef;\r\n  @Input() id: string;\r\n  @Input() items: GalleryItem [];\r\n  @Input() gestures: boolean = this._gallery.config.gestures;\r\n  @Input() panSensitivity: number = this._gallery.config.panSensitivity;\r\n  @Input() zoomOut: number = this._gallery.config.zoomOut;\r\n  @Input() dots: boolean = this._gallery.config.dots;\r\n  @Input() thumb: boolean = this._gallery.config.thumb;\r\n  @Input() nav: boolean = this._gallery.config.nav;\r\n  @Input() counter: boolean = this._gallery.config.counter;\r\n  @Input() thumbWidth: number = this._gallery.config.thumbWidth;\r\n  @Input() thumbHeight: number = this._gallery.config.thumbHeight;\r\n  @Input() disableThumb: boolean = this._gallery.config.disableThumb;\r\n  @Input() thumbPosition: 'top' | 'left' | 'right' | 'bottom' = this._gallery.config.thumbPosition;\r\n  @Input() slidingDirection: 'horizontal' | 'vertical' = this._gallery.config.slidingDirection;\r\n  @Input() destroyRef = true;\r\n\r\n  @Output() indexChange = new EventEmitter<GalleryState>();\r\n  @Output() itemsChange = new EventEmitter<GalleryState>();\r\n\r\n  private _itemChange$: Subscription;\r\n  private _indexChange$: Subscription;\r\n\r\n  constructor(private _gallery: Gallery) {\r\n  }\r\n\r\n  private getConfig() {\r\n    return {\r\n      gestures: this.gestures,\r\n      panSensitivity: this.panSensitivity,\r\n      zoomOut: this.zoomOut,\r\n      counter: this.counter,\r\n      nav: this.nav,\r\n      dots: this.dots,\r\n      thumb: this.thumb,\r\n      thumbWidth: this.thumbWidth,\r\n      thumbHeight: this.thumbHeight,\r\n      thumbPosition: this.thumbPosition,\r\n      disableThumb: this.disableThumb,\r\n      slidingDirection: this.slidingDirection\r\n    };\r\n  }\r\n\r\n  onIndexChange(i) {\r\n    switch (i) {\r\n      case 'next':\r\n        this.galleryRef.next();\r\n        break;\r\n      case 'prev':\r\n        this.galleryRef.prev();\r\n        break;\r\n      default:\r\n        this.galleryRef.set(i);\r\n    }\r\n  }\r\n\r\n  ngOnChanges() {\r\n    if (this.galleryRef instanceof GalleryRef) {\r\n      this.galleryRef.setConfig(this.getConfig());\r\n\r\n      if (this.items !== this.galleryRef.state.items) {\r\n        this.load(this.items);\r\n      }\r\n    }\r\n  }\r\n\r\n  ngOnInit() {\r\n    // Get gallery instance by id\r\n    this.galleryRef = this._gallery.ref(this.id);\r\n    this.galleryRef.setConfig(this.getConfig());\r\n    this.load(this.items);\r\n\r\n    /** Subscribes to indexChange and itemsChange events when user bind them */\r\n    if (this.indexChange.observers.length) {\r\n      this._indexChange$ = this.galleryRef.indexChanged().subscribe((e: GalleryState) => this.indexChange.next(e));\r\n    }\r\n    if (this.itemsChange.observers.length) {\r\n      this._itemChange$ = this.galleryRef.itemsChanged().subscribe((e: GalleryState) => this.itemsChange.next(e));\r\n    }\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    if (this._indexChange$) {\r\n      this._indexChange$.unsubscribe();\r\n    }\r\n    if (this._itemChange$) {\r\n      this._itemChange$.unsubscribe();\r\n    }\r\n    if (this.destroyRef) {\r\n      this.galleryRef.reset();\r\n    }\r\n  }\r\n\r\n  load(items: GalleryItem[]) {\r\n    this.galleryRef.load(items);\r\n  }\r\n\r\n  add(item: GalleryItem, active?: boolean) {\r\n    this.galleryRef.add(item, active);\r\n  }\r\n\r\n  remove(i: number) {\r\n    this.galleryRef.remove(i);\r\n  }\r\n\r\n  next() {\r\n    this.galleryRef.next();\r\n  }\r\n\r\n  prev() {\r\n    this.galleryRef.prev();\r\n  }\r\n\r\n  set(i: number) {\r\n    this.galleryRef.set(i);\r\n  }\r\n\r\n  reset() {\r\n    this.galleryRef.reset();\r\n  }\r\n}\r\n","import { Component, Input, HostBinding, ChangeDetectionStrategy, EventEmitter, Output } from '@angular/core';\r\nimport { GalleryConfig, GalleryState } from '../models';\r\n\r\n@Component({\r\n  selector: 'gallery-core',\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n  preserveWhitespaces: false,\r\n  template: `\r\n    <gallery-thumb *ngIf=\"config.thumb\"\r\n                  [state]=\"state\"\r\n                  [config]=\"config\"\r\n                  (indexChange)=\"indexChange.emit($event)\">\r\n    </gallery-thumb>\r\n    <div class=\"g-box\">\r\n      <gallery-slider [state]=\"state\"\r\n                      [config]=\"config\"\r\n                      (indexChange)=\"indexChange.emit($event)\">\r\n        <gallery-nav *ngIf=\"config.nav && state.items.length > 1\"\r\n                    [state]=\"state\"\r\n                    [config]=\"config\"\r\n                    (indexChange)=\"indexChange.emit($event)\">\r\n        </gallery-nav>\r\n      </gallery-slider>\r\n      <gallery-dots *ngIf=\"config.dots\"\r\n                    [state]=\"state\"\r\n                    (indexChange)=\"indexChange.emit($event)\">\r\n      </gallery-dots>\r\n      <gallery-counter *ngIf=\"config.counter\"\r\n                      [state]=\"state\">\r\n      </gallery-counter>\r\n    </div>\r\n  `\r\n})\r\nexport class GalleryCoreComponent {\r\n\r\n  @Input() state: GalleryState;\r\n  @Input() config: GalleryConfig;\r\n  @Output() indexChange = new EventEmitter<string | number>();\r\n\r\n  /** Set thumbnails position ('top' | 'left' | 'right' | 'bottom') */\r\n  @HostBinding('attr.thumbPosition') get thumbPosition() {\r\n    return this.config.thumbPosition;\r\n  }\r\n\r\n  /** Set thumbnails position ('horizontal' | 'vertical') */\r\n  @HostBinding('attr.slidingDirection') get slidingDirection() {\r\n    return this.config.slidingDirection;\r\n  }\r\n\r\n}\r\n","import { Component, Input, Output, EventEmitter, ChangeDetectionStrategy } from '@angular/core';\r\nimport { GalleryState, GalleryConfig } from '../models';\r\n\r\n@Component({\r\n  selector: 'gallery-nav',\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n  preserveWhitespaces: false,\r\n  template: `\r\n    <i *ngIf=\"config.loop || state.hasPrev\" class=\"g-nav-prev\" (tapClick)=\"indexChange.emit('prev')\"></i>\r\n    <i *ngIf=\"config.loop || state.hasNext\" class=\"g-nav-next\" (tapClick)=\"indexChange.emit('next')\"></i>\r\n  `\r\n})\r\nexport class GalleryNavComponent {\r\n  @Input() state: GalleryState;\r\n  @Input() config: GalleryConfig;\r\n  @Output() indexChange = new EventEmitter<string>();\r\n}\r\n","import {\r\n  Component,\r\n  Input,\r\n  Output,\r\n  OnDestroy,\r\n  OnInit,\r\n  OnChanges,\r\n  ChangeDetectionStrategy,\r\n  ElementRef,\r\n  EventEmitter,\r\n  HostBinding\r\n} from '@angular/core';\r\nimport { GalleryConfig, GalleryState } from '../models';\r\n\r\nimport { BehaviorSubject } from 'rxjs/BehaviorSubject';\r\nimport { Observable } from 'rxjs/Observable';\r\nimport { map } from 'rxjs/operators/map';\r\n\r\ndeclare const Hammer: any;\r\n\r\n@Component({\r\n  selector: 'gallery-thumb',\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n  preserveWhitespaces: false,\r\n  template: `\r\n    <div *ngIf=\"thumbState$ | async; let thumbState\"\r\n         class=\"g-thumb-container\">\r\n      <div class=\"g-thumbs\"\r\n           [class.-no-transition]=\"thumbState.active\"\r\n           [ngStyle]=\"thumbState.style\">\r\n        <div *ngFor=\"let item of state.items;let i = index\"\r\n             class=\"g-thumb\"\r\n             [class.-current]=\"i === state.currIndex\"\r\n             (tapClick)=\"indexChange.emit(i)\"\r\n             [tapClickDisabled]=\"config.disableThumb\">\r\n          <ng-container [item]=\"item\" type=\"thumb\"></ng-container>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  `\r\n})\r\nexport class GalleryThumbComponent implements OnInit, OnChanges, OnDestroy {\r\n\r\n  mc: any;\r\n  thumbState$: Observable<any>;\r\n  stateStream$ = new BehaviorSubject({value: 0, active: false});\r\n  @Input() state: GalleryState;\r\n  @Input() config: GalleryConfig;\r\n  @Output() indexChange = new EventEmitter<string | number>();\r\n  @HostBinding('style.height') height;\r\n  @HostBinding('style.width') width;\r\n\r\n  constructor(private _el: ElementRef) {\r\n    this.thumbState$ = this.stateStream$.pipe(\r\n      map((state: any) => ({\r\n        style: this.thumbsStyle(state.value),\r\n        active: state.active\r\n      })));\r\n  }\r\n\r\n  ngOnChanges() {\r\n    this.stateStream$.next({value: 0, active: false});\r\n  }\r\n\r\n  ngOnInit() {\r\n    if (this.config.gestures && !this.config.disableThumb && typeof Hammer !== 'undefined') {\r\n\r\n      this.mc = new Hammer(this._el.nativeElement);\r\n      this.mc.get('pan').set({direction: Hammer.DIRECTION_ALL});\r\n\r\n      // Slides thumbnails\r\n      this.mc.on('pan', (e) => {\r\n        switch (this.config.thumbPosition) {\r\n          case 'right':\r\n          case 'left':\r\n            this.stateStream$.next({value: e.deltaY, active: true});\r\n            if (e.isFinal) {\r\n              this.stateStream$.next({value: 0, active: false});\r\n              this.verticalPan(e);\r\n            }\r\n            break;\r\n          case 'top':\r\n          case 'bottom':\r\n            this.stateStream$.next({value: e.deltaX, active: true});\r\n            if (e.isFinal) {\r\n              this.stateStream$.next({value: 0, active: false});\r\n              this.horizontalPan(e);\r\n            }\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    if (this.mc) {\r\n      this.mc.destroy();\r\n    }\r\n  }\r\n\r\n  thumbsStyle(delta: number) {\r\n    let value: number;\r\n    switch (this.config.thumbPosition) {\r\n      case 'top':\r\n      case 'bottom':\r\n        this.height = this.config.thumbHeight + 'px';\r\n        value = -(this.state.currIndex * this.config.thumbWidth) - (this.config.thumbWidth / 2 - delta);\r\n        return {\r\n          transform: `translate3d(${value}px, 0, 0)`,\r\n          width: this.state.items.length * this.config.thumbWidth + 'px',\r\n          height: '100%'\r\n        };\r\n      case 'left':\r\n      case 'right':\r\n        this.width = this.config.thumbWidth + 'px';\r\n        value = -(this.state.currIndex * this.config.thumbHeight) - (this.config.thumbHeight / 2 - delta);\r\n        return {\r\n          transform: `translate3d(0, ${value}px, 0)`,\r\n          width: '100%',\r\n          height: this.state.items.length * this.config.thumbHeight + 'px',\r\n        };\r\n    }\r\n  }\r\n\r\n  verticalPan(e) {\r\n    if (e.velocityY > 0.3) {\r\n      this.indexChange.emit('prev');\r\n    } else if (e.velocityY < -0.3) {\r\n      this.indexChange.emit('next');\r\n    } else {\r\n      if (e.deltaY / 2 <= -this.config.thumbHeight * this.state.items.length / this.config.panSensitivity) {\r\n        this.indexChange.emit('next');\r\n      } else if (e.deltaY / 2 >= this.config.thumbHeight * this.state.items.length / this.config.panSensitivity) {\r\n        this.indexChange.emit('prev');\r\n      } else {\r\n        this.indexChange.emit(this.state.currIndex);\r\n      }\r\n    }\r\n  }\r\n\r\n  horizontalPan(e) {\r\n    if (e.velocityX > 0.3) {\r\n      this.indexChange.emit('prev');\r\n    } else if (e.velocityX < -0.3) {\r\n      this.indexChange.emit('next');\r\n    } else {\r\n      if (e.deltaX / 2 <= -this.config.thumbWidth * this.state.items.length / this.config.panSensitivity) {\r\n        this.indexChange.emit('next');\r\n      } else if (e.deltaX / 2 >= this.config.thumbWidth * this.state.items.length / this.config.panSensitivity) {\r\n        this.indexChange.emit('prev');\r\n      } else {\r\n        this.indexChange.emit(this.state.currIndex);\r\n      }\r\n    }\r\n  }\r\n\r\n}\r\n","import { Component, Input, Output, ChangeDetectionStrategy, EventEmitter } from '@angular/core';\r\nimport { GalleryState } from '../models';\r\n\r\n@Component({\r\n  selector: 'gallery-dots',\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n  preserveWhitespaces: false,\r\n  template: `\r\n    <div class=\"g-dot\"\r\n         *ngFor=\"let item of state.items; let i = index\"\r\n         (tapClick)=\"indexChange.emit(i)\">\r\n      <div class=\"g-dot-inner\"\r\n           [class.-current]=\"i === state.currIndex\"></div>\r\n    </div>\r\n  `\r\n})\r\nexport class GalleryDotsComponent {\r\n  @Input() state: GalleryState;\r\n  @Output() indexChange = new EventEmitter<number>();\r\n}\r\n","import {\r\n  Component,\r\n  Input,\r\n  Output,\r\n  OnDestroy,\r\n  OnInit,\r\n  OnChanges,\r\n  ChangeDetectionStrategy,\r\n  ElementRef,\r\n  EventEmitter,\r\n  Inject,\r\n  PLATFORM_ID\r\n} from '@angular/core';\r\nimport { isPlatformBrowser } from '@angular/common';\r\nimport { GalleryState, GalleryConfig } from '../models';\r\n\r\nimport { BehaviorSubject } from 'rxjs/BehaviorSubject';\r\nimport { Observable } from 'rxjs/Observable';\r\nimport { Subscription } from 'rxjs/Subscription';\r\nimport { map } from 'rxjs/operators/map';\r\nimport { tap } from 'rxjs/operators/tap';\r\nimport { fromEvent } from 'rxjs/observable/fromEvent';\r\nimport { debounceTime } from 'rxjs/operators/debounceTime';\r\n\r\ndeclare const Hammer: any;\r\n\r\n@Component({\r\n  selector: 'gallery-slider',\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n  preserveWhitespaces: false,\r\n  template: `\r\n    <div *ngIf=\"sliderState$ | async; let sliderState\"\r\n         class=\"slides-container\"\r\n         [ngStyle]=\"viewDepth()\">\r\n      <div class=\"slides\"\r\n           [class.-no-transition]=\"sliderState.active\"\r\n           [ngStyle]=\"sliderState.style\">\r\n        <div *ngFor=\"let item of state.items\" class=\"slide\">\r\n          <ng-container [item]=\"item\"></ng-container>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <ng-content></ng-content>\r\n  `\r\n})\r\nexport class GallerySliderComponent implements OnInit, OnChanges, OnDestroy {\r\n\r\n  mc: any;\r\n  resizeSub$: Subscription;\r\n  sliderState$: Observable<any>;\r\n  stateStream$ = new BehaviorSubject({value: 0, active: false});\r\n  @Input() state: GalleryState;\r\n  @Input() config: GalleryConfig;\r\n  @Input() width: number;\r\n  @Input() height: number;\r\n  @Output() indexChange = new EventEmitter<string | number>();\r\n\r\n  constructor(private _el: ElementRef, @Inject(PLATFORM_ID) private platform: Object) {\r\n    this.sliderState$ = this.stateStream$.pipe(map(\r\n      (state: any) => ({\r\n        style: this.sliderStyle(state.value),\r\n        active: state.active\r\n      })));\r\n  }\r\n\r\n  viewDepth() {\r\n    return {transform: `perspective(50px) translate3d(0, 0, ${-this.config.zoomOut}px)`};\r\n  }\r\n\r\n  sliderStyle(delta: number) {\r\n    switch (this.config.slidingDirection) {\r\n      case 'horizontal':\r\n        return {\r\n          transform: `translate3d(${-(this.state.currIndex * this._el.nativeElement.offsetWidth) + delta}px, 0, 0)`,\r\n          width: this._el.nativeElement.offsetWidth * this.state.items.length + 'px',\r\n          height: '100%'\r\n        };\r\n      case 'vertical':\r\n        return {\r\n          transform: `translate3d(0, ${-(this.state.currIndex * this._el.nativeElement.offsetHeight) + delta}px, 0)`,\r\n          width: '100%',\r\n          height: this._el.nativeElement.offsetHeight * this.state.items.length + 'px',\r\n        };\r\n    }\r\n  }\r\n\r\n  ngOnChanges() {\r\n    this.stateStream$.next({value: 0, active: false});\r\n  }\r\n\r\n  ngOnInit() {\r\n    if (this.config.gestures && typeof Hammer !== 'undefined') {\r\n\r\n      this.mc = new Hammer(this._el.nativeElement);\r\n      this.mc.get('pan').set({direction: Hammer.DIRECTION_ALL});\r\n\r\n      // Slides thumbnails\r\n      this.mc.on('pan', (e) => {\r\n\r\n        switch (this.config.slidingDirection) {\r\n          case 'horizontal':\r\n            this.stateStream$.next({value: e.deltaX, active: true});\r\n            if (e.isFinal) {\r\n              this.stateStream$.next({value: 0, active: false});\r\n              this.horizontalPan(e);\r\n            }\r\n            break;\r\n          case 'vertical':\r\n            this.stateStream$.next({value: e.deltaY, active: true});\r\n            if (e.isFinal) {\r\n              this.stateStream$.next({value: 0, active: false});\r\n              this.verticalPan(e);\r\n            }\r\n        }\r\n      });\r\n    }\r\n\r\n    // Rearrange slider on window resize\r\n    if (isPlatformBrowser(this.platform)) {\r\n      this.resizeSub$ = fromEvent(window, 'resize').pipe(\r\n        debounceTime(200),\r\n        tap(() => this.stateStream$.next(this.stateStream$.getValue()))\r\n      ).subscribe();\r\n    }\r\n\r\n    // Fix wrong slider width on init\r\n    setTimeout(() => {\r\n      this.stateStream$.next({value: 0, active: false});\r\n    }, 300);\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    if (this.mc) {\r\n      this.mc.destroy();\r\n    }\r\n    if (this.resizeSub$) {\r\n      this.resizeSub$.unsubscribe();\r\n    }\r\n  }\r\n\r\n  verticalPan(e) {\r\n    if (e.velocityY > 0.3) {\r\n      this.indexChange.emit('prev');\r\n    } else if (e.velocityY < -0.3) {\r\n      this.indexChange.emit('next');\r\n    } else {\r\n      if (e.deltaY / 2 <= -this._el.nativeElement.offsetHeight * this.state.items.length / this.config.panSensitivity) {\r\n        this.indexChange.emit('next');\r\n      } else if (e.deltaY / 2 >= this._el.nativeElement.offsetHeight * this.state.items.length / this.config.panSensitivity) {\r\n        this.indexChange.emit('prev');\r\n      } else {\r\n        this.indexChange.emit(this.state.currIndex);\r\n      }\r\n    }\r\n  }\r\n\r\n  horizontalPan(e) {\r\n    if (e.velocityX > 0.3) {\r\n      this.indexChange.emit('prev');\r\n    } else if (e.velocityX < -0.3) {\r\n      this.indexChange.emit('next');\r\n    } else {\r\n      if (e.deltaX / 2 <= -this._el.nativeElement.offsetWidth * this.state.items.length / this.config.panSensitivity) {\r\n        this.indexChange.emit('next');\r\n      } else if (e.deltaX / 2 >= this._el.nativeElement.offsetWidth * this.state.items.length / this.config.panSensitivity) {\r\n        this.indexChange.emit('prev');\r\n      } else {\r\n        this.indexChange.emit(this.state.currIndex);\r\n      }\r\n    }\r\n  }\r\n}\r\n","import { Component, Input, ChangeDetectionStrategy } from '@angular/core';\r\nimport { GalleryState } from '../models';\r\n\r\n@Component({\r\n  selector: 'gallery-counter',\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n  preserveWhitespaces: false,\r\n  template: `<div class=\"g-counter\">{{(state.currIndex + 1) + '/' + state.items.length}}</div>`\r\n})\r\nexport class GalleryCounterComponent {\r\n  @Input() state: GalleryState;\r\n}\r\n","import {\r\n  Directive,\r\n  ElementRef,\r\n  Input,\r\n  Output,\r\n  EventEmitter,\r\n  Renderer2,\r\n  OnDestroy\r\n} from '@angular/core';\r\n\r\nimport { Subject } from 'rxjs/Subject';\r\n\r\nimport { switchMap } from 'rxjs/operators/switchMap';\r\nimport { tap } from 'rxjs/operators/tap';\r\nimport { zip } from 'rxjs/observable/zip';\r\nimport { fromEvent } from 'rxjs/observable/fromEvent';\r\n\r\n@Directive({\r\n  selector: '[lazyImage]'\r\n})\r\nexport class LazyDirective implements OnDestroy {\r\n\r\n  // Lazy load worker\r\n  private _worker$ = new Subject();\r\n\r\n  @Input('lazyImage')\r\n  set lazyImage(imagePath) {\r\n    this.loadImage(imagePath);\r\n  }\r\n\r\n  @Output() loading = new EventEmitter<boolean>();\r\n\r\n  constructor(private _el: ElementRef, private _renderer: Renderer2) {\r\n    const img = new Image();\r\n\r\n    this._worker$.pipe(\r\n      switchMap((imageSrc: string) => {\r\n\r\n        // Image is loading\r\n        this.loading.emit(true);\r\n\r\n        // Stop previously loading\r\n        img.src = imageSrc;\r\n\r\n        // Image load success\r\n        const loadSuccess = fromEvent(img, 'load').pipe(\r\n          tap(() => {\r\n            this._renderer.setStyle(this._el.nativeElement, 'backgroundImage', `url(${imageSrc})`);\r\n            this.loading.emit(false);\r\n          })\r\n        );\r\n\r\n        // Image load error\r\n        const loadError = fromEvent(img, 'error').pipe(tap(() => this.loading.emit(false)));\r\n\r\n        return zip(loadSuccess, loadError);\r\n      })\r\n    ).subscribe();\r\n  }\r\n\r\n  loadImage(imagePath) {\r\n    this._worker$.next(imagePath);\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this._worker$.complete();\r\n  }\r\n\r\n}\r\n","/**\r\n * This directive enable tap if HammerJS is loaded, otherwise it falls back to normal click event \r\n */\r\nimport { Directive, ElementRef, EventEmitter, Input, OnDestroy, OnInit, Output, Renderer2 } from '@angular/core';\r\n\r\ndeclare const Hammer: any;\r\n\r\n@Directive({\r\n  selector: '[tapClick]'\r\n})\r\nexport class TapClickDirective implements OnInit, OnDestroy {\r\n\r\n  mc: any;\r\n  clickListener: any;\r\n  @Input() tapClickDisabled: boolean;\r\n  @Output() tapClick = new EventEmitter();\r\n\r\n  constructor(private el: ElementRef, private renderer: Renderer2) {\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.setTapEvent();\r\n  }\r\n\r\n  /** Enable gestures if hammer is loaded */\r\n  setTapEvent() {\r\n\r\n    if (typeof Hammer !== 'undefined') {\r\n\r\n      // Use hammer.js tap event\r\n      this.mc = new Hammer(this.el.nativeElement);\r\n      this.mc.on('tap', () => {\r\n        if (!this.tapClickDisabled) {\r\n          this.tapClick.emit(null);\r\n        }\r\n      });\r\n    } else {\r\n      // Use normal click event\r\n      this.clickListener = this.renderer.listen(this.el.nativeElement, 'click', (e) => {\r\n        e.stopPropagation();\r\n        if (!this.tapClickDisabled) {\r\n          this.tapClick.emit(null);\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    if (this.mc) {\r\n      this.mc.destroy();\r\n    } else {\r\n      this.clickListener();\r\n    }\r\n  }\r\n}\r\n","import {\r\n  Directive,\r\n  Input,\r\n  OnInit,\r\n  ComponentFactoryResolver,\r\n  ViewContainerRef\r\n} from '@angular/core';\r\nimport { GalleryItem, GalleryItemComponent } from '../models';\r\n\r\n@Directive({\r\n  selector: '[item]'\r\n})\r\nexport class GalleryItemDirective implements OnInit {\r\n\r\n  @Input() item: GalleryItem;\r\n  @Input() type: 'slide' | 'thumb' = 'slide';\r\n\r\n  constructor(private componentFactoryResolver: ComponentFactoryResolver,\r\n              private viewContainerRef: ViewContainerRef) {\r\n  }\r\n\r\n  ngOnInit() {\r\n    const componentFactory = this.componentFactoryResolver\r\n      .resolveComponentFactory(this.item[this.type === 'slide' ? 'component' : 'thumbComponent']);\r\n    this.viewContainerRef.clear();\r\n    const componentRef = this.viewContainerRef.createComponent(componentFactory);\r\n    const galleryItem: GalleryItemComponent = componentRef.instance;\r\n    galleryItem.data = this.item.data;\r\n  }\r\n\r\n}\r\n","import { InjectionToken, NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\nimport { Gallery } from './services/gallery.service';\r\nimport { GalleryConfig } from './models';\r\nimport { GALLERY_CONFIG } from './utils/gallery.token';\r\n\r\nimport { GalleryComponent } from './components/gallery.component';\r\nimport { GalleryCoreComponent } from './components/gallery-core.component';\r\nimport { GalleryNavComponent } from './components/gallery-nav.component';\r\nimport { GalleryThumbComponent } from './components/gallery-thumb.component';\r\nimport { GalleryDotsComponent } from './components/gallery-dots.component';\r\nimport { GallerySliderComponent } from './components/gallery-slider.component';\r\nimport { GalleryCounterComponent } from './components/gallery-counter.component';\r\n\r\nimport { LazyDirective } from './directives/lazy.directive';\r\nimport { TapClickDirective } from './directives/tap-click.directive';\r\nimport { GalleryItemDirective } from './directives/gallery-item.directive';\r\nimport { ImageItemComponent } from './templates/image-item.component';\r\nimport { VideoItemComponent } from './templates/video-item.component';\r\nimport { IframeItemComponent } from './templates/iframe-item.component';\r\nimport { ThumbnailItemComponent } from './templates/thumbnail-item.component';\r\n\r\nexport function galleryFactory(galleryConfig: GalleryConfig) {\r\n  return new Gallery(galleryConfig);\r\n}\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule\r\n  ],\r\n  declarations: [\r\n    GalleryComponent,\r\n    GalleryCoreComponent,\r\n    GalleryNavComponent,\r\n    GalleryThumbComponent,\r\n    GalleryDotsComponent,\r\n    GallerySliderComponent,\r\n    GalleryCounterComponent,\r\n    ImageItemComponent,\r\n    VideoItemComponent,\r\n    IframeItemComponent,\r\n    ThumbnailItemComponent,\r\n    GalleryItemDirective,\r\n    LazyDirective,\r\n    TapClickDirective\r\n  ],\r\n  exports: [\r\n    GalleryComponent,\r\n    LazyDirective,\r\n    TapClickDirective\r\n  ],\r\n  entryComponents: [\r\n    IframeItemComponent,\r\n    ImageItemComponent,\r\n    VideoItemComponent,\r\n    ThumbnailItemComponent\r\n  ]\r\n})\r\nexport class GalleryModule {\r\n  static forRoot(config?: GalleryConfig) {\r\n\r\n    return {\r\n      ngModule: GalleryModule,\r\n      providers: [\r\n        {\r\n          provide: GALLERY_CONFIG,\r\n          useValue: config\r\n        },\r\n        {\r\n          provide: Gallery,\r\n          useFactory: galleryFactory,\r\n          deps: [GALLERY_CONFIG]\r\n        }\r\n      ]\r\n    };\r\n  }\r\n}\r\n"],"names":["BehaviorSubject","filter","InjectionToken","Injectable","Inject","Component","ChangeDetectionStrategy","DomSanitizer","Input","EventEmitter","Output","HostBinding","map","ElementRef","isPlatformBrowser","fromEvent","debounceTime","tap","PLATFORM_ID","Subject","switchMap","zip","Directive","Renderer2","ComponentFactoryResolver","ViewContainerRef","NgModule","CommonModule"],"mappings":"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"}
